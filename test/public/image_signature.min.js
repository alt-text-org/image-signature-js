"use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_slicedToArray=function(){function r(r,e){var n=[],t=!0,a=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(t=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);t=!0);}catch(r){a=!0,i=r}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(r){function e(t){if(n[t])return n[t].exports;var a=n[t]={exports:{},id:t,loaded:!1};return r[t].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=r,e.c=n,e.p="",e(0)}([function(r,e,n){var t=n(1),a={generate:t.generate,distance:t.distance};"undefined"==typeof window?r.exports=a:window.imageSignature=a},function(r,e,n){function t(r){var e=h.array(r.data),n=e.reshape(r.height,r.width,3),t=h.images.rgb2gray(n),a=i(t,10,90),u=o(a,10,10),l=u.flatten().tolist(),g=c.map(l,function(r,e){return p.getNeighbors.apply(p,[u].concat(_toConsumableArray(f.apply(void 0,[e].concat(_toConsumableArray(u.shape)))),[-1,1,!1]))}),y=c.map(c.zip(l,g),function(r){var e=_slicedToArray(r,2),n=e[0],t=e[1];return c.map(t.flatten().tolist(),function(r){return r-n})}),v=h.array(c.filter(_.flatten(y),function(r){return r>2})),d=h.array(c.filter(_.flatten(y),function(r){return r<-2})),m=p.percentile(v,50),w=p.percentile(d,50),b=c.partial(s,2,m,w),A=c.map(y,function(r){return c.map(r,b)});return A}function a(r){var e=_.sliding(r,3,4),n=e.map(u);return n}function i(r,e,n){var t=p.cumsum(p.sum(h.abs(p.diff(r,void 0,1)),1)),a=p.cumsum(p.sum(h.abs(p.diff(r,void 0,0)),0)),i=t.get(-1),o=a.get(-1),s=p.searchsorted(t,i*n/100),u=p.searchsorted(t,i*e/100),l=p.searchsorted(a,o*n/100),f=p.searchsorted(a,o*e/100);return r.slice([u,s+1],[f,l+1])}function o(r,e,n){var t=r.shape[0]/e,a=r.shape[1]/n,i=Math.max(2,Math.floor(.5+Math.min(r.shape[0],r.shape[1])/20)),o=Math.ceil((i-1)/2),s=-Math.floor((i-1)/2),u=c.map(c.range(t,r.shape[0],t),Math.floor),f=c.map(c.range(a,r.shape[1],a),Math.floor),_=(r.flatten().tolist(),l(f,u)),g=c.map(_,function(e){var n=_slicedToArray(e,2),t=n[0],a=n[1];return p.getNeighbors(r,a,t,s,o,!0)}),y=c.map(g,function(r){return r.mean()}),v=h.array(y),d=v.reshape(e-1,n-1);return d}function s(r,e,n,t){return t<-r?t<n?-2:-1:t>r?t>e?2:1:0}function u(r){return r.reduce(function(r,e,n,t){return r+=e,n===t.length-1?0===t.length?0:r/t.length:r},0)}function l(){return c.reduce(arguments,function(r,e){return c.flatten(c.map(r,function(r){return c.map(e,function(e){return r.concat([e])})}),!0)},[[]])}function f(r,e,n){return[Math.floor(r/e),r%n]}var c=n(2),h=n(3),p=n(8),_=n(9),g=function(r,e){return p.distance(h.array(_.flatten(r)),h.array(_.flatten(e)))};r.exports={generate:t,grayscale:a,autoCrop:i,normalize:s,computeGridAverages:o,distance:g}},function(r,e,n){var t,a;(function(){function n(r){function e(e,n,t,a,i,o){for(;i>=0&&i<o;i+=r){var s=a?a[i]:i;t=n(t,e[s],s,e)}return t}return function(n,t,a,i){t=E(t,i,4);var o=!I(n)&&A.keys(n),s=(o||n).length,u=r>0?0:s-1;return arguments.length<3&&(a=n[o?o[u]:u],u+=r),e(n,t,a,o,u,s)}}function i(r){return function(e,n,t){n=j(n,t);for(var a=S(e),i=r>0?0:a-1;i>=0&&i<a;i+=r)if(n(e[i],i,e))return i;return-1}}function o(r,e,n){return function(t,a,i){var o=0,s=S(t);if("number"==typeof i)r>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return i=n(t,a),t[i]===a?i:-1;if(a!==a)return i=e(_.call(t,o,s),A.isNaN),i>=0?i+o:-1;for(i=r>0?o:s-1;i>=0&&i<s;i+=r)if(t[i]===a)return i;return-1}}function s(r,e){var n=M.length,t=r.constructor,a=A.isFunction(t)&&t.prototype||c,i="constructor";for(A.has(r,i)&&!A.contains(e,i)&&e.push(i);n--;)i=M[n],i in r&&r[i]!==a[i]&&!A.contains(e,i)&&e.push(i)}var u=this,l=u._,f=Array.prototype,c=Object.prototype,h=Function.prototype,p=f.push,_=f.slice,g=c.toString,y=c.hasOwnProperty,v=Array.isArray,d=Object.keys,m=h.bind,w=Object.create,b=function(){},A=function r(e){return e instanceof r?e:this instanceof r?void(this._wrapped=e):new r(e)};"undefined"!=typeof r&&r.exports&&(e=r.exports=A),e._=A,A.VERSION="1.8.3";var E=function(r,e,n){if(void 0===e)return r;switch(null==n?3:n){case 1:return function(n){return r.call(e,n)};case 2:return function(n,t){return r.call(e,n,t)};case 3:return function(n,t,a){return r.call(e,n,t,a)};case 4:return function(n,t,a,i){return r.call(e,n,t,a,i)}}return function(){return r.apply(e,arguments)}},j=function(r,e,n){return null==r?A.identity:A.isFunction(r)?E(r,e,n):A.isObject(r)?A.matcher(r):A.property(r)};A.iteratee=function(r,e){return j(r,e,1/0)};var x=function(r,e){return function(n){var t=arguments.length;if(t<2||null==n)return n;for(var a=1;a<t;a++)for(var i=arguments[a],o=r(i),s=o.length,u=0;u<s;u++){var l=o[u];e&&void 0!==n[l]||(n[l]=i[l])}return n}},T=function(r){if(!A.isObject(r))return{};if(w)return w(r);b.prototype=r;var e=new b;return b.prototype=null,e},V=function(r){return function(e){return null==e?void 0:e[r]}},R=Math.pow(2,53)-1,S=V("length"),I=function(r){var e=S(r);return"number"==typeof e&&e>=0&&e<=R};A.each=A.forEach=function(r,e,n){e=E(e,n);var t,a;if(I(r))for(t=0,a=r.length;t<a;t++)e(r[t],t,r);else{var i=A.keys(r);for(t=0,a=i.length;t<a;t++)e(r[i[t]],i[t],r)}return r},A.map=A.collect=function(r,e,n){e=j(e,n);for(var t=!I(r)&&A.keys(r),a=(t||r).length,i=Array(a),o=0;o<a;o++){var s=t?t[o]:o;i[o]=e(r[s],s,r)}return i},A.reduce=A.foldl=A.inject=n(1),A.reduceRight=A.foldr=n(-1),A.find=A.detect=function(r,e,n){var t;if(t=I(r)?A.findIndex(r,e,n):A.findKey(r,e,n),void 0!==t&&t!==-1)return r[t]},A.filter=A.select=function(r,e,n){var t=[];return e=j(e,n),A.each(r,function(r,n,a){e(r,n,a)&&t.push(r)}),t},A.reject=function(r,e,n){return A.filter(r,A.negate(j(e)),n)},A.every=A.all=function(r,e,n){e=j(e,n);for(var t=!I(r)&&A.keys(r),a=(t||r).length,i=0;i<a;i++){var o=t?t[i]:i;if(!e(r[o],o,r))return!1}return!0},A.some=A.any=function(r,e,n){e=j(e,n);for(var t=!I(r)&&A.keys(r),a=(t||r).length,i=0;i<a;i++){var o=t?t[i]:i;if(e(r[o],o,r))return!0}return!1},A.contains=A.includes=A.include=function(r,e,n,t){return I(r)||(r=A.values(r)),("number"!=typeof n||t)&&(n=0),A.indexOf(r,e,n)>=0},A.invoke=function(r,e){var n=_.call(arguments,2),t=A.isFunction(e);return A.map(r,function(r){var a=t?e:r[e];return null==a?a:a.apply(r,n)})},A.pluck=function(r,e){return A.map(r,A.property(e))},A.where=function(r,e){return A.filter(r,A.matcher(e))},A.findWhere=function(r,e){return A.find(r,A.matcher(e))},A.max=function(r,e,n){var t,a,i=-(1/0),o=-(1/0);if(null==e&&null!=r){r=I(r)?r:A.values(r);for(var s=0,u=r.length;s<u;s++)t=r[s],t>i&&(i=t)}else e=j(e,n),A.each(r,function(r,n,t){a=e(r,n,t),(a>o||a===-(1/0)&&i===-(1/0))&&(i=r,o=a)});return i},A.min=function(r,e,n){var t,a,i=1/0,o=1/0;if(null==e&&null!=r){r=I(r)?r:A.values(r);for(var s=0,u=r.length;s<u;s++)t=r[s],t<i&&(i=t)}else e=j(e,n),A.each(r,function(r,n,t){a=e(r,n,t),(a<o||a===1/0&&i===1/0)&&(i=r,o=a)});return i},A.shuffle=function(r){for(var e,n=I(r)?r:A.values(r),t=n.length,a=Array(t),i=0;i<t;i++)e=A.random(0,i),e!==i&&(a[i]=a[e]),a[e]=n[i];return a},A.sample=function(r,e,n){return null==e||n?(I(r)||(r=A.values(r)),r[A.random(r.length-1)]):A.shuffle(r).slice(0,Math.max(0,e))},A.sortBy=function(r,e,n){return e=j(e,n),A.pluck(A.map(r,function(r,n,t){return{value:r,index:n,criteria:e(r,n,t)}}).sort(function(r,e){var n=r.criteria,t=e.criteria;if(n!==t){if(n>t||void 0===n)return 1;if(n<t||void 0===t)return-1}return r.index-e.index}),"value")};var k=function(r){return function(e,n,t){var a={};return n=j(n,t),A.each(e,function(t,i){var o=n(t,i,e);r(a,t,o)}),a}};A.groupBy=k(function(r,e,n){A.has(r,n)?r[n].push(e):r[n]=[e]}),A.indexBy=k(function(r,e,n){r[n]=e}),A.countBy=k(function(r,e,n){A.has(r,n)?r[n]++:r[n]=1}),A.toArray=function(r){return r?A.isArray(r)?_.call(r):I(r)?A.map(r,A.identity):A.values(r):[]},A.size=function(r){return null==r?0:I(r)?r.length:A.keys(r).length},A.partition=function(r,e,n){e=j(e,n);var t=[],a=[];return A.each(r,function(r,n,i){(e(r,n,i)?t:a).push(r)}),[t,a]},A.first=A.head=A.take=function(r,e,n){if(null!=r)return null==e||n?r[0]:A.initial(r,r.length-e)},A.initial=function(r,e,n){return _.call(r,0,Math.max(0,r.length-(null==e||n?1:e)))},A.last=function(r,e,n){if(null!=r)return null==e||n?r[r.length-1]:A.rest(r,Math.max(0,r.length-e))},A.rest=A.tail=A.drop=function(r,e,n){return _.call(r,null==e||n?1:e)},A.compact=function(r){return A.filter(r,A.identity)};var B=function r(e,n,t,a){for(var i=[],o=0,s=a||0,u=S(e);s<u;s++){var l=e[s];if(I(l)&&(A.isArray(l)||A.isArguments(l))){n||(l=r(l,n,t));var f=0,c=l.length;for(i.length+=c;f<c;)i[o++]=l[f++]}else t||(i[o++]=l)}return i};A.flatten=function(r,e){return B(r,e,!1)},A.without=function(r){return A.difference(r,_.call(arguments,1))},A.uniq=A.unique=function(r,e,n,t){A.isBoolean(e)||(t=n,n=e,e=!1),null!=n&&(n=j(n,t));for(var a=[],i=[],o=0,s=S(r);o<s;o++){var u=r[o],l=n?n(u,o,r):u;e?(o&&i===l||a.push(u),i=l):n?A.contains(i,l)||(i.push(l),a.push(u)):A.contains(a,u)||a.push(u)}return a},A.union=function(){return A.uniq(B(arguments,!0,!0))},A.intersection=function(r){for(var e=[],n=arguments.length,t=0,a=S(r);t<a;t++){var i=r[t];if(!A.contains(e,i)){for(var o=1;o<n&&A.contains(arguments[o],i);o++);o===n&&e.push(i)}}return e},A.difference=function(r){var e=B(arguments,!0,!0,1);return A.filter(r,function(r){return!A.contains(e,r)})},A.zip=function(){return A.unzip(arguments)},A.unzip=function(r){for(var e=r&&A.max(r,S).length||0,n=Array(e),t=0;t<e;t++)n[t]=A.pluck(r,t);return n},A.object=function(r,e){for(var n={},t=0,a=S(r);t<a;t++)e?n[r[t]]=e[t]:n[r[t][0]]=r[t][1];return n},A.findIndex=i(1),A.findLastIndex=i(-1),A.sortedIndex=function(r,e,n,t){n=j(n,t,1);for(var a=n(e),i=0,o=S(r);i<o;){var s=Math.floor((i+o)/2);n(r[s])<a?i=s+1:o=s}return i},A.indexOf=o(1,A.findIndex,A.sortedIndex),A.lastIndexOf=o(-1,A.findLastIndex),A.range=function(r,e,n){null==e&&(e=r||0,r=0),n=n||1;for(var t=Math.max(Math.ceil((e-r)/n),0),a=Array(t),i=0;i<t;i++,r+=n)a[i]=r;return a};var P=function(r,e,n,t,a){if(!(t instanceof e))return r.apply(n,a);var i=T(r.prototype),o=r.apply(i,a);return A.isObject(o)?o:i};A.bind=function(r,e){if(m&&r.bind===m)return m.apply(r,_.call(arguments,1));if(!A.isFunction(r))throw new TypeError("Bind must be called on a function");var n=_.call(arguments,2),t=function t(){return P(r,t,e,this,n.concat(_.call(arguments)))};return t},A.partial=function(r){var e=_.call(arguments,1),n=function n(){for(var t=0,a=e.length,i=Array(a),o=0;o<a;o++)i[o]=e[o]===A?arguments[t++]:e[o];for(;t<arguments.length;)i.push(arguments[t++]);return P(r,n,this,this,i)};return n},A.bindAll=function(r){var e,n,t=arguments.length;if(t<=1)throw new Error("bindAll must be passed function names");for(e=1;e<t;e++)n=arguments[e],r[n]=A.bind(r[n],r);return r},A.memoize=function(r,e){var n=function n(t){var a=n.cache,i=""+(e?e.apply(this,arguments):t);return A.has(a,i)||(a[i]=r.apply(this,arguments)),a[i]};return n.cache={},n},A.delay=function(r,e){var n=_.call(arguments,2);return setTimeout(function(){return r.apply(null,n)},e)},A.defer=A.partial(A.delay,A,1),A.throttle=function(r,e,n){var t,a,i,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:A.now(),o=null,i=r.apply(t,a),o||(t=a=null)};return function(){var l=A.now();s||n.leading!==!1||(s=l);var f=e-(l-s);return t=this,a=arguments,f<=0||f>e?(o&&(clearTimeout(o),o=null),s=l,i=r.apply(t,a),o||(t=a=null)):o||n.trailing===!1||(o=setTimeout(u,f)),i}},A.debounce=function(r,e,n){var t,a,i,o,s,u=function u(){var l=A.now()-o;l<e&&l>=0?t=setTimeout(u,e-l):(t=null,n||(s=r.apply(i,a),t||(i=a=null)))};return function(){i=this,a=arguments,o=A.now();var l=n&&!t;return t||(t=setTimeout(u,e)),l&&(s=r.apply(i,a),i=a=null),s}},A.wrap=function(r,e){return A.partial(e,r)},A.negate=function(r){return function(){return!r.apply(this,arguments)}},A.compose=function(){var r=arguments,e=r.length-1;return function(){for(var n=e,t=r[e].apply(this,arguments);n--;)t=r[n].call(this,t);return t}},A.after=function(r,e){return function(){if(--r<1)return e.apply(this,arguments)}},A.before=function(r,e){var n;return function(){return--r>0&&(n=e.apply(this,arguments)),r<=1&&(e=null),n}},A.once=A.partial(A.before,2);var U=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];A.keys=function(r){if(!A.isObject(r))return[];if(d)return d(r);var e=[];for(var n in r)A.has(r,n)&&e.push(n);return U&&s(r,e),e},A.allKeys=function(r){if(!A.isObject(r))return[];var e=[];for(var n in r)e.push(n);return U&&s(r,e),e},A.values=function(r){for(var e=A.keys(r),n=e.length,t=Array(n),a=0;a<n;a++)t[a]=r[e[a]];return t},A.mapObject=function(r,e,n){e=j(e,n);for(var t,a=A.keys(r),i=a.length,o={},s=0;s<i;s++)t=a[s],o[t]=e(r[t],t,r);return o},A.pairs=function(r){for(var e=A.keys(r),n=e.length,t=Array(n),a=0;a<n;a++)t[a]=[e[a],r[e[a]]];return t},A.invert=function(r){for(var e={},n=A.keys(r),t=0,a=n.length;t<a;t++)e[r[n[t]]]=n[t];return e},A.functions=A.methods=function(r){var e=[];for(var n in r)A.isFunction(r[n])&&e.push(n);return e.sort()},A.extend=x(A.allKeys),A.extendOwn=A.assign=x(A.keys),A.findKey=function(r,e,n){e=j(e,n);for(var t,a=A.keys(r),i=0,o=a.length;i<o;i++)if(t=a[i],e(r[t],t,r))return t},A.pick=function(r,e,n){var t,a,i={},o=r;if(null==o)return i;A.isFunction(e)?(a=A.allKeys(o),t=E(e,n)):(a=B(arguments,!1,!1,1),t=function(r,e,n){return e in n},o=Object(o));for(var s=0,u=a.length;s<u;s++){var l=a[s],f=o[l];t(f,l,o)&&(i[l]=f)}return i},A.omit=function(r,e,n){if(A.isFunction(e))e=A.negate(e);else{var t=A.map(B(arguments,!1,!1,1),String);e=function(r,e){return!A.contains(t,e)}}return A.pick(r,e,n)},A.defaults=x(A.allKeys,!0),A.create=function(r,e){var n=T(r);return e&&A.extendOwn(n,e),n},A.clone=function(r){return A.isObject(r)?A.isArray(r)?r.slice():A.extend({},r):r},A.tap=function(r,e){return e(r),r},A.isMatch=function(r,e){var n=A.keys(e),t=n.length;if(null==r)return!t;for(var a=Object(r),i=0;i<t;i++){var o=n[i];if(e[o]!==a[o]||!(o in a))return!1}return!0};var N=function r(e,n,t,a){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof A&&(e=e._wrapped),n instanceof A&&(n=n._wrapped);var i=g.call(e);if(i!==g.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var o="[object Array]"===i;if(!o){if("object"!=("undefined"==typeof e?"undefined":_typeof(e))||"object"!=("undefined"==typeof n?"undefined":_typeof(n)))return!1;var s=e.constructor,u=n.constructor;if(s!==u&&!(A.isFunction(s)&&s instanceof s&&A.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in n)return!1}t=t||[],a=a||[];for(var l=t.length;l--;)if(t[l]===e)return a[l]===n;if(t.push(e),a.push(n),o){if(l=e.length,l!==n.length)return!1;for(;l--;)if(!r(e[l],n[l],t,a))return!1}else{var f,c=A.keys(e);if(l=c.length,A.keys(n).length!==l)return!1;for(;l--;)if(f=c[l],!A.has(n,f)||!r(e[f],n[f],t,a))return!1}return t.pop(),a.pop(),!0};A.isEqual=function(r,e){return N(r,e)},A.isEmpty=function(r){return null==r||(I(r)&&(A.isArray(r)||A.isString(r)||A.isArguments(r))?0===r.length:0===A.keys(r).length)},A.isElement=function(r){return!(!r||1!==r.nodeType)},A.isArray=v||function(r){return"[object Array]"===g.call(r)},A.isObject=function(r){var e="undefined"==typeof r?"undefined":_typeof(r);return"function"===e||"object"===e&&!!r},A.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(r){A["is"+r]=function(e){return g.call(e)==="[object "+r+"]"}}),A.isArguments(arguments)||(A.isArguments=function(r){return A.has(r,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":_typeof(Int8Array))&&(A.isFunction=function(r){return"function"==typeof r||!1}),A.isFinite=function(r){return isFinite(r)&&!isNaN(parseFloat(r))},A.isNaN=function(r){return A.isNumber(r)&&r!==+r},A.isBoolean=function(r){return r===!0||r===!1||"[object Boolean]"===g.call(r)},A.isNull=function(r){return null===r},A.isUndefined=function(r){return void 0===r},A.has=function(r,e){return null!=r&&y.call(r,e)},A.noConflict=function(){return u._=l,this},A.identity=function(r){return r},A.constant=function(r){return function(){return r}},A.noop=function(){},A.property=V,A.propertyOf=function(r){return null==r?function(){}:function(e){return r[e]}},A.matcher=A.matches=function(r){return r=A.extendOwn({},r),function(e){return A.isMatch(e,r)}},A.times=function(r,e,n){var t=Array(Math.max(0,r));e=E(e,n,1);for(var a=0;a<r;a++)t[a]=e(a);return t},A.random=function(r,e){return null==e&&(e=r,r=0),r+Math.floor(Math.random()*(e-r+1))},A.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=A.invert(O),Y=function(r){var e=function(e){return r[e]},n="(?:"+A.keys(r).join("|")+")",t=RegExp(n),a=RegExp(n,"g");return function(r){return r=null==r?"":""+r,t.test(r)?r.replace(a,e):r}};A.escape=Y(O),A.unescape=Y(C),A.result=function(r,e,n){var t=null==r?void 0:r[e];return void 0===t&&(t=n),A.isFunction(t)?t.call(r):t};var D=0;A.uniqueId=function(r){var e=++D+"";return r?r+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,F=function(r){return"\\"+L[r]};A.template=function(r,e,n){!e&&n&&(e=n),e=A.defaults({},e,A.templateSettings);var t=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),a=0,i="__p+='";r.replace(t,function(e,n,t,o,s){return i+=r.slice(a,s).replace(z,F),a=s+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":t?i+="'+\n((__t=("+t+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(e.variable||"obj","_",i)}catch(r){throw r.source=i,r}var s=function(r){return o.call(this,r,A)},u=e.variable||"obj";return s.source="function("+u+"){\n"+i+"}",s},A.chain=function(r){var e=A(r);return e._chain=!0,e};var H=function(r,e){return r._chain?A(e).chain():e};A.mixin=function(r){A.each(A.functions(r),function(e){var n=A[e]=r[e];A.prototype[e]=function(){var r=[this._wrapped];return p.apply(r,arguments),H(this,n.apply(A,r))}})},A.mixin(A),A.each(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var e=f[r];A.prototype[r]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==r&&"splice"!==r||0!==n.length||delete n[0],H(this,n)}}),A.each(["concat","join","slice"],function(r){var e=f[r];A.prototype[r]=function(){return H(this,e.apply(this._wrapped,arguments))}}),A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return""+this._wrapped},t=[],a=function(){return A}.apply(e,t),!(void 0!==a&&(r.exports=a))}).call(this)},function(r,e,n){var t,t;(function(e,n){!function(e){r.exports=e()}(function(){return function r(e,n,a){function i(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof t&&t;if(!u&&l)return t(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(r){var n=e[s][1][r];return i(n?n:r)},c,c.exports,r,e,n,a)}return n[s].exports}for(var o="function"==typeof t&&t,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(r,e,n){function t(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===r[e-2]?2:"="===r[e-1]?1:0}function a(r){return 3*r.length/4-t(r)}function i(r){var e,n,a,i,o,s,u=r.length;o=t(r),s=new c(3*u/4-o),a=o>0?u-4:u;var l=0;for(e=0,n=0;e<a;e+=4,n+=3)i=f[r.charCodeAt(e)]<<18|f[r.charCodeAt(e+1)]<<12|f[r.charCodeAt(e+2)]<<6|f[r.charCodeAt(e+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=f[r.charCodeAt(e)]<<2|f[r.charCodeAt(e+1)]>>4,s[l++]=255&i):1===o&&(i=f[r.charCodeAt(e)]<<10|f[r.charCodeAt(e+1)]<<4|f[r.charCodeAt(e+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s}function o(r){return l[r>>18&63]+l[r>>12&63]+l[r>>6&63]+l[63&r]}function s(r,e,n){for(var t,a=[],i=e;i<n;i+=3)t=(r[i]<<16)+(r[i+1]<<8)+r[i+2],a.push(o(t));return a.join("")}function u(r){for(var e,n=r.length,t=n%3,a="",i=[],o=16383,u=0,f=n-t;u<f;u+=o)i.push(s(r,u,u+o>f?f:u+o));return 1===t?(e=r[n-1],a+=l[e>>2],a+=l[e<<4&63],a+="=="):2===t&&(e=(r[n-2]<<8)+r[n-1],a+=l[e>>10],a+=l[e>>4&63],a+=l[e<<2&63],a+="="),i.push(a),i.join("")}n.byteLength=a,n.toByteArray=i,n.fromByteArray=u;for(var l=[],f=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,_=h.length;p<_;++p)l[p]=h[p],f[h.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],2:[function(r,e,n){"use restrict";function t(r){var e=32;return r&=-r,r&&e--,65535&r&&(e-=16),16711935&r&&(e-=8),252645135&r&&(e-=4),858993459&r&&(e-=2),1431655765&r&&(e-=1),e}var a=32;n.INT_BITS=a,n.INT_MAX=2147483647,n.INT_MIN=-1<<a-1,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var e=r>>a-1;return(r^e)-e},n.min=function(r,e){return e^(r^e)&-(r<e)},n.max=function(r,e){return r^(r^e)&-(r<e)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var e,n;return e=(r>65535)<<4,r>>>=e,n=(r>255)<<3,r>>>=n,e|=n,n=(r>15)<<2,r>>>=n,e|=n,n=(r>3)<<1,r>>>=n,e|=n,e|r>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return r-=r>>>1&1431655765,r=(858993459&r)+(r>>>2&858993459),16843009*(r+(r>>>4)&252645135)>>>24},n.countTrailingZeros=t,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var i=new Array(256);!function(r){for(var e=0;e<256;++e){var n=e,t=e,a=7;for(n>>>=1;n;n>>>=1)t<<=1,t|=1&n,--a;r[e]=t<<a&255}}(i),n.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},n.interleave2=function(r,e){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),r|e<<1},n.deinterleave2=function(r,e){return r=r>>>e&1431655765,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),r=65535&(r|r>>>16),r<<16>>16},n.interleave3=function(r,e,n){return r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),r|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),r|n<<2},n.deinterleave3=function(r,e){return r=r>>>e&1227133513,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),r=1023&(r|r>>>16),r<<22>>22},n.nextCombination=function(r){var e=r|r-1;return e+1|(~e&-~e)-1>>>t(r)+1}},{}],3:[function(r,n,t){(function(e){function n(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()&&"function"==typeof r.subarray&&0===r.subarray(1,1).byteLength}catch(r){return!1}}function a(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(r,e){if(a()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=o.prototype):(null===r&&(r=new o(e)),r.length=e),r}function o(r,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(r,e,n);if("number"==typeof r){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,r)}return s(this,r,e,n)}function s(r,e,n,t){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(r,e,n,t):"string"==typeof e?c(r,e,n):_(r,e)}function u(r){if("number"!=typeof r)throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function l(r,e,n,t){return u(e),e<=0?i(r,e):void 0!==n?"string"==typeof t?i(r,e).fill(n,t):i(r,e).fill(n):i(r,e)}function f(r,e){if(u(e),r=i(r,e<0?0:0|g(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function c(r,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var t=0|v(e,n);r=i(r,t);var a=r.write(e,n);return a!==t&&(r=r.slice(0,a)),r}function h(r,e){var n=e.length<0?0:0|g(e.length);r=i(r,n);for(var t=0;t<n;t+=1)r[t]=255&e[t];return r}function p(r,e,n,t){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(t||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===t?new Uint8Array(e):void 0===t?new Uint8Array(e,n):new Uint8Array(e,n,t),o.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=o.prototype):r=h(r,e),r}function _(r,e){if(o.isBuffer(e)){var n=0|g(e.length);return r=i(r,n),0===r.length?r:(e.copy(r,0,0,n),r)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(r,0):h(r,e);if("Buffer"===e.type&&Q(e.data))return h(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(r){if(r>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|r}function y(r){return+r!=r&&(r=0),o.alloc(+r)}function v(r,e){if(o.isBuffer(r))return r.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;"string"!=typeof r&&(r=""+r);var n=r.length;if(0===n)return 0;for(var t=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(r).length;default:if(t)return H(r).length;e=(""+e).toLowerCase(),t=!0}}function d(r,e,n){var t=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(r||(r="utf8");;)switch(r){case"hex":return P(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return B(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,n);default:if(t)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),t=!0}}function m(r,e,n){var t=r[e];r[e]=r[n],r[n]=t}function w(r,e,n,t,a){if(0===r.length)return-1;if("string"==typeof n?(t=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:r.length-1),n<0&&(n=r.length+n),n>=r.length){if(a)return-1;n=r.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof e&&(e=o.from(e,t)),o.isBuffer(e))return 0===e.length?-1:b(r,e,n,t,a);if("number"==typeof e)return e=255&e,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(r,e,n):Uint8Array.prototype.lastIndexOf.call(r,e,n):b(r,[e],n,t,a);throw new TypeError("val must be string, number or Buffer")}function b(r,e,n,t,a){function i(r,e){return 1===o?r[e]:r.readUInt16BE(e*o)}var o=1,s=r.length,u=e.length;if(void 0!==t&&(t=String(t).toLowerCase(),"ucs2"===t||"ucs-2"===t||"utf16le"===t||"utf-16le"===t)){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}var l;if(a){var f=-1;for(l=n;l<s;l++)if(i(r,l)===i(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===u)return f*o}else f!==-1&&(l-=l-f),f=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var c=!0,h=0;h<u;h++)if(i(r,l+h)!==i(e,h)){c=!1;break}if(c)return l}return-1}function A(r,e,n,t){n=Number(n)||0;var a=r.length-n;t?(t=Number(t),t>a&&(t=a)):t=a;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");t>i/2&&(t=i/2);for(var o=0;o<t;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;r[n+o]=s}return o}function E(r,e,n,t){return G(H(e,r.length-n),r,n,t)}function j(r,e,n,t){return G(J(e),r,n,t)}function x(r,e,n,t){return j(r,e,n,t)}function T(r,e,n,t){return G($(e),r,n,t)}function V(r,e,n,t){return G(K(e,r.length-n),r,n,t)}function R(r,e,n){return 0===e&&n===r.length?Z.fromByteArray(r):Z.fromByteArray(r.slice(e,n))}function S(r,e,n){n=Math.min(r.length,n);for(var t=[],a=e;a<n;){var i=r[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s<=n){var u,l,f,c;switch(s){case 1:i<128&&(o=i);break;case 2:u=r[a+1],128===(192&u)&&(c=(31&i)<<6|63&u,c>127&&(o=c));break;case 3:u=r[a+1],l=r[a+2],128===(192&u)&&128===(192&l)&&(c=(15&i)<<12|(63&u)<<6|63&l,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:u=r[a+1],l=r[a+2],f=r[a+3],128===(192&u)&&128===(192&l)&&128===(192&f)&&(c=(15&i)<<18|(63&u)<<12|(63&l)<<6|63&f,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,t.push(o>>>10&1023|55296),o=56320|1023&o),t.push(o),a+=s}return I(t)}function I(r){var e=r.length;if(e<=rr)return String.fromCharCode.apply(String,r);for(var n="",t=0;t<e;)n+=String.fromCharCode.apply(String,r.slice(t,t+=rr));return n}function k(r,e,n){var t="";n=Math.min(r.length,n);for(var a=e;a<n;++a)t+=String.fromCharCode(127&r[a]);return t}function B(r,e,n){var t="";n=Math.min(r.length,n);for(var a=e;a<n;++a)t+=String.fromCharCode(r[a]);return t}function P(r,e,n){var t=r.length;(!e||e<0)&&(e=0),(!n||n<0||n>t)&&(n=t);for(var a="",i=e;i<n;++i)a+=F(r[i]);return a}function U(r,e,n){for(var t=r.slice(e,n),a="",i=0;i<t.length;i+=2)a+=String.fromCharCode(t[i]+256*t[i+1]);return a}function M(r,e,n){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(r,e,n,t,a,i){if(!o.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(n+t>r.length)throw new RangeError("Index out of range")}function O(r,e,n,t){e<0&&(e=65535+e+1);for(var a=0,i=Math.min(r.length-n,2);a<i;++a)r[n+a]=(e&255<<8*(t?a:1-a))>>>8*(t?a:1-a)}function C(r,e,n,t){e<0&&(e=4294967295+e+1);for(var a=0,i=Math.min(r.length-n,4);a<i;++a)r[n+a]=e>>>8*(t?a:3-a)&255}function Y(r,e,n,t,a,i){if(n+t>r.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(r,e,n,t,a){return a||Y(r,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(r,e,n,t,23,4),n+4}function q(r,e,n,t,a){return a||Y(r,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(r,e,n,t,52,8),n+8}function L(r){if(r=z(r).replace(er,""),r.length<2)return"";for(;r.length%4!==0;)r+="=";return r}function z(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function F(r){return r<16?"0"+r.toString(16):r.toString(16)}function H(r,e){e=e||1/0;for(var n,t=r.length,a=null,i=[],o=0;o<t;++o){if(n=r.charCodeAt(o),n>55295&&n<57344){if(!a){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===t){(e-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(e-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){
if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function J(r){for(var e=[],n=0;n<r.length;++n)e.push(255&r.charCodeAt(n));return e}function K(r,e){for(var n,t,a,i=[],o=0;o<r.length&&!((e-=2)<0);++o)n=r.charCodeAt(o),t=n>>8,a=n%256,i.push(a),i.push(t);return i}function $(r){return Z.toByteArray(L(r))}function G(r,e,n,t){for(var a=0;a<t&&!(a+n>=e.length||a>=r.length);++a)e[a+n]=r[a];return a}function X(r){return r!==r}var Z=r("base64-js"),W=r("ieee754"),Q=r("isarray");t.Buffer=o,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=a(),o.poolSize=8192,o._augment=function(r){return r.__proto__=o.prototype,r},o.from=function(r,e,n){return s(null,r,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(r,e,n){return l(null,r,e,n)},o.allocUnsafe=function(r){return f(null,r)},o.allocUnsafeSlow=function(r){return f(null,r)},o.isBuffer=function(r){return!(null==r||!r._isBuffer)},o.compare=function(r,e){if(!o.isBuffer(r)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(r===e)return 0;for(var n=r.length,t=e.length,a=0,i=Math.min(n,t);a<i;++a)if(r[a]!==e[a]){n=r[a],t=e[a];break}return n<t?-1:t<n?1:0},o.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(r,e){if(!Q(r))throw new TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<r.length;++n)e+=r[n].length;var t=o.allocUnsafe(e),a=0;for(n=0;n<r.length;++n){var i=r[n];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(t,a),a+=i.length}return t},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)m(this,e,e+1);return this},o.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},o.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},o.prototype.toString=function(){var r=0|this.length;return 0===r?"":0===arguments.length?S(this,0,r):d.apply(this,arguments)},o.prototype.equals=function(r){if(!o.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===o.compare(this,r)},o.prototype.inspect=function(){var r="",e=t.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(r+=" ... ")),"<Buffer "+r+">"},o.prototype.compare=function(r,e,n,t,a){if(!o.isBuffer(r))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=r?r.length:0),void 0===t&&(t=0),void 0===a&&(a=this.length),e<0||n>r.length||t<0||a>this.length)throw new RangeError("out of range index");if(t>=a&&e>=n)return 0;if(t>=a)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,t>>>=0,a>>>=0,this===r)return 0;for(var i=a-t,s=n-e,u=Math.min(i,s),l=this.slice(t,a),f=r.slice(e,n),c=0;c<u;++c)if(l[c]!==f[c]){i=l[c],s=f[c];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(r,e,n){return this.indexOf(r,e,n)!==-1},o.prototype.indexOf=function(r,e,n){return w(this,r,e,n,!0)},o.prototype.lastIndexOf=function(r,e,n){return w(this,r,e,n,!1)},o.prototype.write=function(r,e,n,t){if(void 0===e)t="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)t=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===t&&(t="utf8")):(t=n,n=void 0)}var a=this.length-e;if((void 0===n||n>a)&&(n=a),r.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");t||(t="utf8");for(var i=!1;;)switch(t){case"hex":return A(this,r,e,n);case"utf8":case"utf-8":return E(this,r,e,n);case"ascii":return j(this,r,e,n);case"latin1":case"binary":return x(this,r,e,n);case"base64":return T(this,r,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,r,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(""+t).toLowerCase(),i=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var rr=4096;o.prototype.slice=function(r,e){var n=this.length;r=~~r,e=void 0===e?n:~~e,r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<r&&(e=r);var t;if(o.TYPED_ARRAY_SUPPORT)t=this.subarray(r,e),t.__proto__=o.prototype;else{var a=e-r;t=new o(a,(void 0));for(var i=0;i<a;++i)t[i]=this[i+r]}return t},o.prototype.readUIntLE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=this[r],a=1,i=0;++i<e&&(a*=256);)t+=this[r+i]*a;return t},o.prototype.readUIntBE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=this[r+--e],a=1;e>0&&(a*=256);)t+=this[r+--e]*a;return t},o.prototype.readUInt8=function(r,e){return e||M(r,1,this.length),this[r]},o.prototype.readUInt16LE=function(r,e){return e||M(r,2,this.length),this[r]|this[r+1]<<8},o.prototype.readUInt16BE=function(r,e){return e||M(r,2,this.length),this[r]<<8|this[r+1]},o.prototype.readUInt32LE=function(r,e){return e||M(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},o.prototype.readUInt32BE=function(r,e){return e||M(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},o.prototype.readIntLE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=this[r],a=1,i=0;++i<e&&(a*=256);)t+=this[r+i]*a;return a*=128,t>=a&&(t-=Math.pow(2,8*e)),t},o.prototype.readIntBE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=e,a=1,i=this[r+--t];t>0&&(a*=256);)i+=this[r+--t]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*e)),i},o.prototype.readInt8=function(r,e){return e||M(r,1,this.length),128&this[r]?(255-this[r]+1)*-1:this[r]},o.prototype.readInt16LE=function(r,e){e||M(r,2,this.length);var n=this[r]|this[r+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(r,e){e||M(r,2,this.length);var n=this[r+1]|this[r]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(r,e){return e||M(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},o.prototype.readInt32BE=function(r,e){return e||M(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},o.prototype.readFloatLE=function(r,e){return e||M(r,4,this.length),W.read(this,r,!0,23,4)},o.prototype.readFloatBE=function(r,e){return e||M(r,4,this.length),W.read(this,r,!1,23,4)},o.prototype.readDoubleLE=function(r,e){return e||M(r,8,this.length),W.read(this,r,!0,52,8)},o.prototype.readDoubleBE=function(r,e){return e||M(r,8,this.length),W.read(this,r,!1,52,8)},o.prototype.writeUIntLE=function(r,e,n,t){if(r=+r,e=0|e,n=0|n,!t){var a=Math.pow(2,8*n)-1;N(this,r,e,n,a,0)}var i=1,o=0;for(this[e]=255&r;++o<n&&(i*=256);)this[e+o]=r/i&255;return e+n},o.prototype.writeUIntBE=function(r,e,n,t){if(r=+r,e=0|e,n=0|n,!t){var a=Math.pow(2,8*n)-1;N(this,r,e,n,a,0)}var i=n-1,o=1;for(this[e+i]=255&r;--i>=0&&(o*=256);)this[e+i]=r/o&255;return e+n},o.prototype.writeUInt8=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[e]=255&r,e+1},o.prototype.writeUInt16LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):O(this,r,e,!0),e+2},o.prototype.writeUInt16BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):O(this,r,e,!1),e+2},o.prototype.writeUInt32LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=255&r):C(this,r,e,!0),e+4},o.prototype.writeUInt32BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):C(this,r,e,!1),e+4},o.prototype.writeIntLE=function(r,e,n,t){if(r=+r,e=0|e,!t){var a=Math.pow(2,8*n-1);N(this,r,e,n,a-1,-a)}var i=0,o=1,s=0;for(this[e]=255&r;++i<n&&(o*=256);)r<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(r/o>>0)-s&255;return e+n},o.prototype.writeIntBE=function(r,e,n,t){if(r=+r,e=0|e,!t){var a=Math.pow(2,8*n-1);N(this,r,e,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[e+i]=255&r;--i>=0&&(o*=256);)r<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(r/o>>0)-s&255;return e+n},o.prototype.writeInt8=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[e]=255&r,e+1},o.prototype.writeInt16LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):O(this,r,e,!0),e+2},o.prototype.writeInt16BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):O(this,r,e,!1),e+2},o.prototype.writeInt32LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24):C(this,r,e,!0),e+4},o.prototype.writeInt32BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):C(this,r,e,!1),e+4},o.prototype.writeFloatLE=function(r,e,n){return D(this,r,e,!0,n)},o.prototype.writeFloatBE=function(r,e,n){return D(this,r,e,!1,n)},o.prototype.writeDoubleLE=function(r,e,n){return q(this,r,e,!0,n)},o.prototype.writeDoubleBE=function(r,e,n){return q(this,r,e,!1,n)},o.prototype.copy=function(r,e,n,t){if(n||(n=0),t||0===t||(t=this.length),e>=r.length&&(e=r.length),e||(e=0),t>0&&t<n&&(t=n),t===n)return 0;if(0===r.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(t<0)throw new RangeError("sourceEnd out of bounds");t>this.length&&(t=this.length),r.length-e<t-n&&(t=r.length-e+n);var a,i=t-n;if(this===r&&n<e&&e<t)for(a=i-1;a>=0;--a)r[a+e]=this[a+n];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)r[a+e]=this[a+n];else Uint8Array.prototype.set.call(r,this.subarray(n,n+i),e);return i},o.prototype.fill=function(r,e,n,t){if("string"==typeof r){if("string"==typeof e?(t=e,e=0,n=this.length):"string"==typeof n&&(t=n,n=this.length),1===r.length){var a=r.charCodeAt(0);a<256&&(r=a)}if(void 0!==t&&"string"!=typeof t)throw new TypeError("encoding must be a string");if("string"==typeof t&&!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t)}else"number"==typeof r&&(r=255&r);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,r||(r=0);var i;if("number"==typeof r)for(i=e;i<n;++i)this[i]=r;else{var s=o.isBuffer(r)?r:H(new o(r,t).toString()),u=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%u]}return this};var er=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:10,isarray:4}],4:[function(r,e,n){var t={}.toString;e.exports=Array.isArray||function(r){return"[object Array]"==t.call(r)}},{}],5:[function(r,e,n){function t(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function a(r){var e=new t;e.pre=r.pre,e.body=r.body,e.post=r.post;var n=r.args.slice(0);e.argTypes=n;for(var a=0;a<n.length;++a){var o=n[a];if("array"===o||"object"===("undefined"==typeof o?"undefined":_typeof(o))&&o.blockIndices){if(e.argTypes[a]="array",e.arrayArgs.push(a),e.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),e.shimArgs.push("array"+a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(a),e.shimArgs.push("scalar"+a);else if("index"===o){if(e.indexArgs.push(a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(a),a<e.pre.args.length&&e.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<e.post.args.length&&e.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==("undefined"==typeof o?"undefined":_typeof(o))||!o.offset)throw new Error("cwise: Unknown argument type "+n[a]);e.argTypes[a]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(a)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!r.printCode||!!r.debug,e.funcName=r.funcName||"cwise",e.blockSize=r.blockSize||64,i(e)}var i=r("./lib/thunk.js");e.exports=a},{"./lib/thunk.js":7}],6:[function(r,e,n){function t(r,e,n){var t,a,i=r.length,o=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],l=[],f=0,c=0;for(t=0;t<i;++t)l.push(["i",t,"=0"].join(""));for(a=0;a<o;++a)for(t=0;t<i;++t)c=f,f=r[t],0===t?l.push(["d",a,"s",t,"=t",a,"p",f].join("")):l.push(["d",a,"s",t,"=(t",a,"p",f,"-s",c,"*t",a,"p",c,")"].join(""));for(u.push("var "+l.join(",")),t=i-1;t>=0;--t)f=r[t],u.push(["for(i",t,"=0;i",t,"<s",f,";++i",t,"){"].join(""));for(u.push(n),t=0;t<i;++t){for(c=f,f=r[t],a=0;a<o;++a)u.push(["p",a,"+=d",a,"s",t].join(""));s&&(t>0&&u.push(["index[",c,"]-=s",c].join("")),u.push(["++index[",f,"]"].join(""))),u.push("}")}return u.join("\n")}function a(r,e,n,a){for(var i=e.length,o=n.arrayArgs.length,s=n.blockSize,u=n.indexArgs.length>0,l=[],f=0;f<o;++f)l.push(["var offset",f,"=p",f].join(""));for(var f=r;f<i;++f)l.push(["for(var j"+f+"=SS[",e[f],"]|0;j",f,">0;){"].join("")),l.push(["if(j",f,"<",s,"){"].join("")),l.push(["s",e[f],"=j",f].join("")),l.push(["j",f,"=0"].join("")),l.push(["}else{s",e[f],"=",s].join("")),l.push(["j",f,"-=",s,"}"].join("")),u&&l.push(["index[",e[f],"]=j",f].join(""));for(var f=0;f<o;++f){for(var c=["offset"+f],h=r;h<i;++h)c.push(["j",h,"*t",f,"p",e[h]].join(""));l.push(["p",f,"=(",c.join("+"),")"].join(""))}l.push(t(e,n,a));for(var f=r;f<i;++f)l.push("}");return l.join("\n")}function i(r){for(var e=0,n=r[0].length;e<n;){for(var t=1;t<r.length;++t)if(r[t][e]!==r[0][e])return e;++e}return e}function o(r,e,n){for(var t=r.body,a=[],i=[],o=0;o<r.args.length;++o){var s=r.args[o];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",f=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var c=e.offsetArgIndex.indexOf(o),h=e.offsetArgs[c];f=h.array,l="+q"+c;case"array":l="p"+f+l;var p="l"+o,_="a"+f;if(0===e.arrayBlockIndices[f])1===s.count?"generic"===n[f]?s.lvalue?(a.push(["var ",p,"=",_,".get(",l,")"].join("")),t=t.replace(u,p),i.push([_,".set(",l,",",p,")"].join(""))):t=t.replace(u,[_,".get(",l,")"].join("")):t=t.replace(u,[_,"[",l,"]"].join("")):"generic"===n[f]?(a.push(["var ",p,"=",_,".get(",l,")"].join("")),t=t.replace(u,p),s.lvalue&&i.push([_,".set(",l,",",p,")"].join(""))):(a.push(["var ",p,"=",_,"[",l,"]"].join("")),t=t.replace(u,p),s.lvalue&&i.push([_,"[",l,"]=",p].join("")));else{for(var g=[s.name],y=[l],v=0;v<Math.abs(e.arrayBlockIndices[f]);v++)g.push("\\s*\\[([^\\]]+)\\]"),y.push("$"+(v+1)+"*t"+f+"b"+v);if(u=new RegExp(g.join(""),"g"),l=y.join("+"),"generic"===n[f])throw new Error("cwise: Generic arrays not supported in combination with blocks!");t=t.replace(u,[_,"[",l,"]"].join(""))}break;case"scalar":t=t.replace(u,"Y"+e.scalarArgs.indexOf(o));break;case"index":t=t.replace(u,"index");break;case"shape":t=t.replace(u,"shape")}}}return[a.join("\n"),t,i.join("\n")].join("\n").trim()}function s(r){for(var e=new Array(r.length),n=!0,t=0;t<r.length;++t){var a=r[t],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?e[t]="u"+a.charAt(1)+i:e[t]=a.charAt(0)+i,t>0&&(n=n&&e[t]===e[t-1])}return n?e[0]:e.join("")}function u(r,e){for(var n=e[1].length-Math.abs(r.arrayBlockIndices[0])|0,u=new Array(r.arrayArgs.length),f=new Array(r.arrayArgs.length),c=0;c<r.arrayArgs.length;++c)f[c]=e[2*c],u[c]=e[2*c+1];for(var h=[],p=[],_=[],g=[],y=[],c=0;c<r.arrayArgs.length;++c){r.arrayBlockIndices[c]<0?(_.push(0),g.push(n),h.push(n),p.push(n+r.arrayBlockIndices[c])):(_.push(r.arrayBlockIndices[c]),g.push(r.arrayBlockIndices[c]+n),h.push(0),p.push(r.arrayBlockIndices[c]));for(var v=[],d=0;d<u[c].length;d++)_[c]<=u[c][d]&&u[c][d]<g[c]&&v.push(u[c][d]-_[c]);y.push(v)}for(var m=["SS"],w=["'use strict'"],b=[],d=0;d<n;++d)b.push(["s",d,"=SS[",d,"]"].join(""));for(var c=0;c<r.arrayArgs.length;++c){m.push("a"+c),m.push("t"+c),m.push("p"+c);for(var d=0;d<n;++d)b.push(["t",c,"p",d,"=t",c,"[",_[c]+d,"]"].join(""));for(var d=0;d<Math.abs(r.arrayBlockIndices[c]);++d)b.push(["t",c,"b",d,"=t",c,"[",h[c]+d,"]"].join(""))}for(var c=0;c<r.scalarArgs.length;++c)m.push("Y"+c);if(r.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),r.indexArgs.length>0){for(var A=new Array(n),c=0;c<n;++c)A[c]="0";b.push(["index=[",A.join(","),"]"].join(""))}for(var c=0;c<r.offsetArgs.length;++c){for(var E=r.offsetArgs[c],j=[],d=0;d<E.offset.length;++d)0!==E.offset[d]&&(1===E.offset[d]?j.push(["t",E.array,"p",d].join("")):j.push([E.offset[d],"*t",E.array,"p",d].join("")));0===j.length?b.push("q"+c+"=0"):b.push(["q",c,"=",j.join("+")].join(""))}var x=l([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));b=b.concat(x),w.push("var "+b.join(","));for(var c=0;c<r.arrayArgs.length;++c)w.push("p"+c+"|=0");r.pre.body.length>3&&w.push(o(r.pre,r,f));var T=o(r.body,r,f),V=i(y);V<n?w.push(a(V,y[0],r,T)):w.push(t(y[0],r,T)),r.post.body.length>3&&w.push(o(r.post,r,f)),r.debug&&console.log("-----Generated cwise routine for ",e,":\n"+w.join("\n")+"\n----------");var R=[r.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",V,s(f)].join(""),S=new Function(["function ",R,"(",m.join(","),"){",w.join("\n"),"} return ",R].join(""));return S()}var l=r("uniq");e.exports=u},{uniq:22}],7:[function(r,e,n){function t(r){var e=["'use strict'","var CACHED={}"],n=[],t=r.funcName+"_cwise_thunk";e.push(["return function ",t,"(",r.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],s=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],f=0;f<r.arrayArgs.length;++f){var c=r.arrayArgs[f];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),s.push("array"+c+".data"),s.push("array"+c+".stride"),s.push("array"+c+".offset|0"),f>0&&(u.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[f]))),l.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[f])+"]"))}r.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var f=0;f<r.scalarArgs.length;++f)s.push("scalar"+r.scalarArgs[f]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------");var h=new Function("compile",e.join("\n"));return h(a.bind(void 0,r))}var a=r("./compile.js");e.exports=t},{"./compile.js":6}],8:[function(r,e,n){e.exports=r("cwise-compiler")},{"cwise-compiler":5}],9:[function(r,e,n){function t(r,e,n){var a=0|r[n];if(a<=0)return[];var i,o=new Array(a);if(n===r.length-1)for(i=0;i<a;++i)o[i]=e;else for(i=0;i<a;++i)o[i]=t(r,e,n+1);return o}function a(r,e){var n,t;for(n=new Array(r),t=0;t<r;++t)n[t]=e;return n}function i(r,e){switch("undefined"==typeof e&&(e=0),"undefined"==typeof r?"undefined":_typeof(r)){case"number":if(r>0)return a(0|r,e);break;case"object":if("number"==typeof r.length)return t(r,e,0)}return[]}e.exports=i},{}],10:[function(r,e,n){n.read=function(r,e,n,t,a){var i,o,s=8*a-t-1,u=(1<<s)-1,l=u>>1,f=-7,c=n?a-1:0,h=n?-1:1,p=r[e+c];for(c+=h,i=p&(1<<-f)-1,p>>=-f,f+=s;f>0;i=256*i+r[e+c],c+=h,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=t;f>0;o=256*o+r[e+c],c+=h,f-=8);if(0===i)i=1-l;else{if(i===u)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,t),i-=l}return(p?-1:1)*o*Math.pow(2,i-t)},n.write=function(r,e,n,t,a,i){var o,s,u,l=8*i-a-1,f=(1<<l)-1,c=f>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=t?0:i-1,_=t?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),e+=o+c>=1?h/u:h*Math.pow(2,1-c),e*u>=2&&(o++,u/=2),o+c>=f?(s=0,o=f):o+c>=1?(s=(e*u-1)*Math.pow(2,a),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,a),o=0));a>=8;r[n+p]=255&s,p+=_,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;r[n+p]=255&o,p+=_,o/=256,l-=8);r[n+p-_]|=128*g}},{}],11:[function(r,e,n){function t(r){for(var e=new Array(r),n=0;n<r;++n)e[n]=n;return e}e.exports=t},{}],12:[function(r,e,n){function t(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function a(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&t(r.slice(0,0))}e.exports=function(r){return null!=r&&(t(r)||a(r)||!!r._isBuffer)}},{}],13:[function(r,e,n){function t(r,e,n){var t,u,l=e.shape,f=l.length,c=1,h=new Array(f),p=0;for(t=f-1;t>=0;--t)if(h[t]=c,c*=l[t],p=Math.max(p,s.scratchMemory(l[t])),e.shape[t]!==n.shape[t])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var _,g=4*c+p;_="array"===e.dtype||"float64"===e.dtype||"custom"===e.dtype?o.mallocDouble(g):o.mallocFloat(g);var y,v,d,m,w=i(_,l.slice(0),h,0),b=i(_,l.slice(0),h.slice(0),c),A=i(_,l.slice(0),h.slice(0),2*c),E=i(_,l.slice(0),h.slice(0),3*c),j=4*c;for(a.assign(w,e),a.assign(b,n),t=f-1;t>=0&&(s(r,c/l[t],l[t],_,w.offset,b.offset,j),0!==t);--t){for(v=1,d=A.stride,m=E.stride,u=t-1;u<f;++u)m[u]=d[u]=v,v*=l[u];for(u=t-2;u>=0;--u)m[u]=d[u]=v,v*=l[u];a.assign(A,w),a.assign(E,b),y=w,w=A,A=y,y=b,b=E,E=y}a.assign(e,w),a.assign(n,b),o.free(_)}var a=r("ndarray-ops"),i=r("ndarray"),o=r("typedarray-pool"),s=r("./lib/fft-matrix.js");e.exports=t},{"./lib/fft-matrix.js":14,ndarray:18,"ndarray-ops":17,"typedarray-pool":21}],14:[function(r,e,n){function t(r,e,n,t,a,u,l){r|=0,e|=0,n|=0,a|=0,u|=0,s.isPow2(n)?i(r,e,n,t,a,u):o(r,e,n,t,a,u,l)}function a(r){return s.isPow2(r)?0:2*r+4*s.nextPow2(2*r+1)}function i(r,e,n,t,a,i){r|=0,e|=0,n|=0,a|=0,i|=0;var o,u,l,f,c,h,p,_,g,y,v,d,m,w,b,A,E,j,x,T,V,R,S,I,k;for(o=n,u=s.log2(o),j=0;j<e;++j){for(p=o>>1,c=0,l=0;l<o-1;l++){for(l<c&&(m=t[a+l],t[a+l]=t[a+c],t[a+c]=m,m=t[i+l],t[i+l]=t[i+c],t[i+c]=m),h=p;h<=c;)c-=h,h>>=1;c+=h}for(v=-1,d=0,y=1,_=0;_<u;_++){for(g=y,y<<=1,A=1,E=0,c=0;c<g;c++){for(l=c;l<o;l+=y)f=l+g,x=t[a+f],T=t[i+f],V=t[a+l],R=t[i+l],S=A*(x+T),I=x*(E-A),k=T*(A+E),w=S-k,b=S+I,t[a+f]=V-w,t[i+f]=R-b,t[a+l]+=w,t[i+l]+=b;S=v*(A+E),I=A*(d-v),k=E*(v+d),A=S-k,E=S+I}d=Math.sqrt((1-v)/2),r<0&&(d=-d),v=Math.sqrt((1+v)/2)}if(r<0){var B=1/o;for(l=0;l<o;l++)t[a+l]*=B,t[i+l]*=B}a+=n,i+=n}}function o(r,e,n,t,a,o,u){r|=0,e|=0,n|=0,a|=0,o|=0,u|=0;var l,f,c,h,p,_,g,y,v,d=s.nextPow2(2*n+1),m=u,w=m+n,b=w+n,A=b+d,E=A+d,j=E+d,x=-r*Math.PI/n;for(v=0;v<n;++v)f=x*(v*v%(2*n)),h=Math.cos(f),p=Math.sin(f),t[E+(d-v)]=t[E+v]=t[m+v]=h,t[j+(d-v)]=t[j+v]=t[w+v]=p;for(v=n;v<=d-n;++v)t[E+v]=0;for(v=n;v<=d-n;++v)t[j+v]=0;for(i(1,1,d,t,E,j),x=r<0?1/n:1,l=0;l<e;++l){for(v=0;v<n;++v)f=t[a+v],c=t[o+v],h=t[m+v],p=-t[w+v],_=h*(f+c),g=f*(p-h),y=c*(h+p),t[b+v]=_-y,t[A+v]=_+g;for(v=n;v<d;++v)t[b+v]=0;for(v=n;v<d;++v)t[A+v]=0;for(i(1,1,d,t,b,A),v=0;v<d;++v)f=t[b+v],c=t[A+v],h=t[E+v],p=t[j+v],_=h*(f+c),g=f*(p-h),y=c*(h+p),t[b+v]=_-y,t[A+v]=_+g;for(i(-1,1,d,t,b,A),v=0;v<n;++v)f=t[b+v],c=t[A+v],h=t[m+v],p=-t[w+v],_=h*(f+c),g=f*(p-h),y=c*(h+p),t[a+v]=x*(_-y),t[o+v]=x*(_+g);a+=n,o+=n}}var s=r("bit-twiddle");e.exports=t,e.exports.scratchMemory=a},{"bit-twiddle":2}],15:[function(r,e,n){function t(r){return Array.isArray(r)?[r.length,r[0].length]:r.shape}function a(r,e,n){var a=t(r),i=t(e),o=t(n);if(a[0]!==i[0]||a[1]!==o[1]||i[1]!==o[0])throw new Error("Mismatched array shapes for matrix product")}function i(r){if(Array.isArray(r)){if(Array.isArray(r))return["r","native"]}else if(r.shape&&2===r.shape.length)return r.order[0]?["r",r.dtype]:["c",r.dtype];throw new Error("Unrecognized data type")}function o(r,e,n,t,o){void 0===t&&(t=1),void 0===o&&(o=0);var l=1!==t,f=0!==o,c=i(r),h=i(e),p=i(n);a(r,e,n);var _=[c,h,p,l,f].join(":"),g=u[_];return g||(g=u[_]=s(c,h,p,l,f)),g(r,e,n,t,o)}e.exports=o;var s=r("./lib/planner.js"),u={}},{"./lib/planner.js":16}],16:[function(r,e,n){function t(r,e){return"native"===e[1]?[r,"d0=",r,".length,",r,"d1=",r,"[0].length,"].join(""):[r,"d0=",r,".shape[0],",r,"d1=",r,".shape[1],",r,"s0=",r,".stride[0],",r,"s1=",r,".stride[1],",r,"o=",r,".offset,",r,"d=",r,".data,"].join("")}function a(r,e,n,t,a,i){var o=[];return"native"===n[1]?r[0]&&(t?o.push("var ",e,"p=",e,"[",t,"];"):o.push("var ",e,"p=",e,"[0];")):t&&a?i?o.push("var ",e,"t0=",e,"s",r[0],",",e,"t1=",e,"s",r[1],"-",e,"s",r[0],"*",i,",",e,"p=",e,"o+",t,"*",e,"s0+",a,"*",e,"s1;"):o.push("var ",e,"t0=",e,"s",r[0],",",e,"p=",e,"o+",t,"*",e,"s0+",a,"*",e,"s1;"):t?o.push("var ",e,"t0=",e,"s",r[0],",",e,"p=",e,"o+",t,"*",e,"s0;"):a?o.push("var ",e,"t0=",e,"s",r[0],",",e,"p=",e,"o+",a,"*",e,"s1;"):o.push("var ",e,"t0=",e,"s",r[0],",",e,"t1=",e,"s",r[1],"-",e,"s",r[0],"*",e,"d",r[0],",",e,"p=",e,"o;"),o}function i(r,e,n,t,a){var i=[];return"native"===n[1]?r[0]&&1===t&&i.push(e,"p=",e,"[",a,"+1]"):i.push(e,"p+=",e,"t",t,";"),i}function o(r,e,n,t,a,i){var o=[];return"native"===n[1]?r[0]?o.push(e,"p[",a,"]=",i,";"):o.push(e,"[",t,"][",a,"]=",i,";"):"generic"===n[1]?o.push(e,"d.set(",e,"p,",i,");"):o.push(e,"d[",e,"p]=",i,";"),o}function s(r,e,n,t,a){var i=[];return"native"===n[1]?r[0]?i.push(e,"p[",a,"]"):i.push(e,"[",t,"][",a,"]"):"generic"===n[1]?i.push(e,"d.get(",e,"p)"):i.push(e,"d[",e,"p]"),i.join("")}function u(r,e,n,t,u){var l=[],f="r"===r[0]?[1,0]:[0,1],c=[1,0],h=[0,1],p=["i","j"];return l.push.apply(l,a(f,"o",r)),f[1]?(l.push("for(j=0;j<od1;++j){"),l.push("for(i=0;i<od0;++i){")):(l.push("for(i=0;i<od0;++i){"),l.push("for(j=0;j<od1;++j){")),l.push.apply(l,a(c,"a",e,"i")),l.push.apply(l,a(h,"b",n,void 0,"j")),l.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",s(c,"a",e,"i","k"),"*",s(h,"b",n,"k","j"),";"),l.push.apply(l,i(c,"a",e,0,"k")),l.push.apply(l,i(h,"b",n,0,"k")),l.push("}"),t&&l.push("r*=A;"),u&&l.push("r+=B*",s(f,"o",r,"i","j"),";"),l.push.apply(l,o(f,"o",r,"i","j","r")),l.push.apply(l,i(f,"o",r,0,p[1])),l.push("}"),l.push.apply(l,i(f,"o",r,1,p[0])),l.push("}"),l}function l(r,e){var n,t=[],u="r"===r[0]?[1,0]:[0,1];return e&&t.push("if(B!==1.0){"),t.push.apply(t,a(u,"o",r)),u[0]?(t.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),n=["i","j"]):(t.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),n=["j","i"]),e?t.push.apply(t,o(u,"o",r,"i","j","B*"+s(u,"o",r,"i","j"))):t.push.apply(t,o(u,"o",r,"i","j","0")),t.push.apply(t,i(u,"o",r,0,n[1])),t.push("}"),t.push.apply(t,i(u,"o",r,1,n[0])),t.push("}"),e&&t.push("}"),t}function f(r,e,n,t,u){var f=[],c=["od0","od1","ad1"],p=[1,0],_=[1,0],g=[0,1];f.push.apply(f,l(r,u));for(var y=0;y<3;++y)f.push("for(var i",y,"=",c[y],";i",y,">0;){","var w",y,"=",h,";","if(i",y,"<",h,"){","w",y,"=i",y,";","i",y,"=0;","}else{","i",y,"-=",h,";","}");f.push.apply(f,a(p,"o",r,"i0","i1","w1")),f.push("for(i=0;i<w0;++i){\tfor(j=0;j<w1;++j){\tvar r=0.0;"),f.push.apply(f,a(_,"a",e,"(i0+i)","i2")),f.push.apply(f,a(g,"b",n,"i2","(i1+j)")),f.push("for(k=0;k<w2;++k){"),f.push("r+=",s(_,"a",e,"(i0+i)","(i2+k)"),"*",s(g,"b",n,"(i2+k)","(i1+j)"),";"),f.push.apply(f,i(_,"a",e,0,"(i2+k)")),f.push.apply(f,i(g,"b",n,0,"(i2+k)")),f.push("}");var v="r";return t&&(v="A*r"),f.push.apply(f,o(p,"o",r,"(i0+i)","(i1+j)",v+"+"+s(p,"o",r,"(i0+i)","(i1+j)"))),f.push.apply(f,i(p,"o",r,0,"(i1+j)")),f.push("}"),f.push.apply(f,i(p,"o",r,1,"(i0+i)")),f.push("}}}}"),f}function c(r,e,n,a,i){var o=["gemm",r[0],r[1],"a",e[0],e[1],"b",n[0],n[1],a?"alpha":"",i?"beta":""].join(""),s=["function ",o,"(o,a,b,A,B){","var ",t("o",r),t("a",e),t("b",n),"i,j,k;"];"r"===e[0]&&"c"===n[0]?s.push.apply(s,u(r,e,n,a,i)):s.push.apply(s,f(r,e,n,a,i)),s.push("}return ",o);var l=new Function(s.join(""));return l()}e.exports=c;var h=32},{}],17:[function(r,e,n){function t(r){if(!r)return s;for(var e=0;e<r.args.length;++e){var n=r.args[e];0===e?r.args[e]={name:n,lvalue:!0,rvalue:!!r.rvalue,count:r.count||1}:r.args[e]={name:n,lvalue:!1,rvalue:!0,count:1}}return r.thisVars||(r.thisVars=[]),r.localVars||(r.localVars=[]),r}function a(r){return o({args:r.args,pre:t(r.pre),body:t(r.body),post:t(r.proc),funcName:r.funcName})}function i(r){for(var e=[],n=0;n<r.args.length;++n)e.push("a"+n);var t=new Function("P",["return function ",r.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));return t(a(r))}var o=r("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var r in u){var e=u[r];n[r]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:r}),n[r+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:r+"eq"}),n[r+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:r+"s"}),n[r+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:r+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var r in l){var e=l[r];n[r]=i({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:r}),n[r+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:r+"eq"})}}();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var r in f){var e=f[r];n[r]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:r}),n[r+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:r+"s"}),n[r+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:r+"eq"}),n[r+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:r+"seq"});
}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var r=0;r<c.length;++r){var e=c[r];n[e]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),n[e+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var r=0;r<h.length;++r){var e=h[r];n[e]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),n[e+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),n[e+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var p=["atan2","pow"];!function(){for(var r=0;r<p.length;++r){var e=p[r];n[e+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),n[e+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),n[e+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),n[e+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),n.any=o({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=o({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=o({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":5}],18:[function(r,e,n){function t(r,e){return r[0]-e[0]}function a(){var r,e=this.stride,n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=[Math.abs(e[r]),r];n.sort(t);var a=new Array(n.length);for(r=0;r<a.length;++r)a[r]=n[r][1];return a}function i(r,e){var n=["View",e,"d",r].join("");e<0&&(n="View_Nil"+r);var t="generic"===r;if(e===-1){var i="function "+n+"(a){this.data=a;};\tvar proto="+n+".prototype;\tproto.dtype='"+r+"';\tproto.index=function(){return -1};\tproto.size=0;\tproto.dimension=-1;\tproto.shape=proto.stride=proto.order=[];\tproto.lo=proto.hi=proto.transpose=proto.step=\tfunction(){return new "+n+"(this.data);};\tproto.get=proto.set=function(){};\tproto.pick=function(){return null};\treturn function construct_"+n+"(a){return new "+n+"(a);}",o=new Function(i);return o()}if(0===e){var i="function "+n+"(a,d) {\tthis.data = a;\tthis.offset = d\t};\tvar proto="+n+".prototype;\tproto.dtype='"+r+"';\tproto.index=function(){return this.offset};\tproto.dimension=0;\tproto.size=1;\tproto.shape=\tproto.stride=\tproto.order=[];\tproto.lo=\tproto.hi=\tproto.transpose=\tproto.step=function "+n+"_copy() {\treturn new "+n+"(this.data,this.offset)\t};\tproto.pick=function "+n+"_pick(){\treturn TrivialArray(this.data);\t};\tproto.valueOf=proto.get=function "+n+"_get(){\treturn "+(t?"this.data.get(this.offset)":"this.data[this.offset]")+"};\tproto.set=function "+n+"_set(v){\treturn "+(t?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"\t};\treturn function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=new Function("TrivialArray",i);return o(c[r][0])}var i=["'use strict'"],s=u(e),l=s.map(function(r){return"i"+r}),f="this.offset+"+s.map(function(r){return"this.stride["+r+"]*i"+r}).join("+"),h=s.map(function(r){return"b"+r}).join(","),p=s.map(function(r){return"c"+r}).join(",");i.push("function "+n+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+r+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){\treturn "+s.map(function(r){return"this.shape["+r+"]"}).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+n+"_order(){"),2===e?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);\tif(s0>s1){\tif(s1>s2){\treturn [2,1,0];\t}else if(s0>s2){\treturn [1,2,0];\t}else{\treturn [1,0,2];\t}\t}else if(s0>s2){\treturn [2,0,1];\t}else if(s2>s1){\treturn [0,1,2];\t}else{\treturn [0,2,1];\t}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+l.join(",")+",v){"),t?i.push("return this.data.set("+f+",v)}"):i.push("return this.data["+f+"]=v}"),i.push("proto.get=function "+n+"_get("+l.join(",")+"){"),t?i.push("return this.data.get("+f+")}"):i.push("return this.data["+f+"]}"),i.push("proto.index=function "+n+"_index(",l.join(),"){return "+f+"}"),i.push("proto.hi=function "+n+"_hi("+l.join(",")+"){return new "+n+"(this.data,"+s.map(function(r){return["(typeof i",r,"!=='number'||i",r,"<0)?this.shape[",r,"]:i",r,"|0"].join("")}).join(",")+","+s.map(function(r){return"this.stride["+r+"]"}).join(",")+",this.offset)}");var _=s.map(function(r){return"a"+r+"=this.shape["+r+"]"}),g=s.map(function(r){return"c"+r+"=this.stride["+r+"]"});i.push("proto.lo=function "+n+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+_.join(",")+","+g.join(","));for(var y=0;y<e;++y)i.push("if(typeof i"+y+"==='number'&&i"+y+">=0){\td=i"+y+"|0;\tb+=c"+y+"*d;\ta"+y+"-=d}");i.push("return new "+n+"(this.data,"+s.map(function(r){return"a"+r}).join(",")+","+s.map(function(r){return"c"+r}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+l.join(",")+"){var "+s.map(function(r){return"a"+r+"=this.shape["+r+"]"}).join(",")+","+s.map(function(r){return"b"+r+"=this.stride["+r+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var y=0;y<e;++y)i.push("if(typeof i"+y+"==='number'){\td=i"+y+"|0;\tif(d<0){\tc+=b"+y+"*(a"+y+"-1);\ta"+y+"=ceil(-a"+y+"/d)\t}else{\ta"+y+"=ceil(a"+y+"/d)\t}\tb"+y+"*=d\t}");i.push("return new "+n+"(this.data,"+s.map(function(r){return"a"+r}).join(",")+","+s.map(function(r){return"b"+r}).join(",")+",c)}");for(var v=new Array(e),d=new Array(e),y=0;y<e;++y)v[y]="a[i"+y+"]",d[y]="b[i"+y+"]";i.push("proto.transpose=function "+n+"_transpose("+l+"){"+l.map(function(r,e){return r+"=("+r+"===undefined?"+e+":"+r+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+v.join(",")+","+d.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var y=0;y<e;++y)i.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map(function(r){return"shape["+r+"]"}).join(",")+","+s.map(function(r){return"stride["+r+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",i.join("\n"));return o(c[r],a)}function o(r){if(l(r))return"buffer";if(f)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(r)?"array":"generic"}function s(r,e,n,t){if(void 0===r){var a=c.array[0];return a([])}"number"==typeof r&&(r=[r]),void 0===e&&(e=[r.length]);var s=e.length;if(void 0===n){n=new Array(s);for(var u=s-1,l=1;u>=0;--u)n[u]=l,l*=e[u]}if(void 0===t){t=0;for(var u=0;u<s;++u)n[u]<0&&(t-=(e[u]-1)*n[u])}for(var f=o(r),h=c[f];h.length<=s+1;)h.push(i(f,h.length-1));var a=h[s+1];return a(r,e,n,t)}var u=r("iota-array"),l=r("is-buffer"),f="undefined"!=typeof Float64Array,c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=s},{"iota-array":11,"is-buffer":12}],19:[function(r,e,n){(function(r){function e(r,e){for(var n=0,t=r.length-1;t>=0;t--){var a=r[t];"."===a?r.splice(t,1):".."===a?(r.splice(t,1),n++):n&&(r.splice(t,1),n--)}if(e)for(;n--;n)r.unshift("..");return r}function t(r,e){if(r.filter)return r.filter(e);for(var n=[],t=0;t<r.length;t++)e(r[t],t,r)&&n.push(r[t]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(r){return a.exec(r).slice(1)};n.resolve=function(){for(var n="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o=i>=0?arguments[i]:r.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,a="/"===o.charAt(0))}return n=e(t(n.split("/"),function(r){return!!r}),!a).join("/"),(a?"/":"")+n||"."},n.normalize=function(r){var a=n.isAbsolute(r),i="/"===o(r,-1);return r=e(t(r.split("/"),function(r){return!!r}),!a).join("/"),r||a||(r="."),r&&i&&(r+="/"),(a?"/":"")+r},n.isAbsolute=function(r){return"/"===r.charAt(0)},n.join=function(){var r=Array.prototype.slice.call(arguments,0);return n.normalize(t(r,function(r,e){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},n.relative=function(r,e){function t(r){for(var e=0;e<r.length&&""===r[e];e++);for(var n=r.length-1;n>=0&&""===r[n];n--);return e>n?[]:r.slice(e,n-e+1)}r=n.resolve(r).substr(1),e=n.resolve(e).substr(1);for(var a=t(r.split("/")),i=t(e.split("/")),o=Math.min(a.length,i.length),s=o,u=0;u<o;u++)if(a[u]!==i[u]){s=u;break}for(var l=[],u=s;u<a.length;u++)l.push("..");return l=l.concat(i.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(r){var e=i(r),n=e[0],t=e[1];return n||t?(t&&(t=t.substr(0,t.length-1)),n+t):"."},n.basename=function(r,e){var n=i(r)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(r){return i(r)[3]};var o="b"==="ab".substr(-1)?function(r,e,n){return r.substr(e,n)}:function(r,e,n){return e<0&&(e=r.length+e),r.substr(e,n)}}).call(this,r("_process"))},{_process:20}],20:[function(r,e,n){function t(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(r){if(c===setTimeout)return setTimeout(r,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(r,0);try{return c(r,0)}catch(e){try{return c.call(null,r,0)}catch(e){return c.call(this,r,0)}}}function o(r){if(h===clearTimeout)return clearTimeout(r);if((h===a||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(r);try{return h(r)}catch(e){try{return h.call(null,r)}catch(e){return h.call(this,r)}}}function s(){y&&_&&(y=!1,_.length?g=_.concat(g):v=-1,g.length&&u())}function u(){if(!y){var r=i(s);y=!0;for(var e=g.length;e;){for(_=g,g=[];++v<e;)_&&_[v].run();v=-1,e=g.length}_=null,y=!1,o(r)}}function l(r,e){this.fun=r,this.array=e}function f(){}var c,h,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:t}catch(r){c=t}try{h="function"==typeof clearTimeout?clearTimeout:a}catch(r){h=a}}();var _,g=[],y=!1,v=-1;p.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new l(r,e)),1!==g.length||y||i(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.binding=function(r){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(r){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],21:[function(r,n,t){(function(e,n){function a(r){if(r){var e=r.length||r.byteLength,n=d.log2(e);A[n].push(r)}}function i(r){a(r.buffer)}function o(r){var r=d.nextPow2(r),e=d.log2(r),n=A[e];return n.length>0?n.pop():new ArrayBuffer(r)}function s(r){return new Uint8Array(o(r),0,r)}function u(r){return new Uint16Array(o(2*r),0,r)}function l(r){return new Uint32Array(o(4*r),0,r)}function f(r){return new Int8Array(o(r),0,r)}function c(r){return new Int16Array(o(2*r),0,r)}function h(r){return new Int32Array(o(4*r),0,r)}function p(r){return new Float32Array(o(4*r),0,r)}function _(r){return new Float64Array(o(8*r),0,r)}function g(r){return w?new Uint8ClampedArray(o(r),0,r):s(r)}function y(r){return new DataView(o(r),0,r)}function v(r){r=d.nextPow2(r);var e=d.log2(r),t=E[e];return t.length>0?t.pop():new n(r)}var d=r("bit-twiddle"),m=r("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var w="undefined"!=typeof Uint8ClampedArray,b=e.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=m([32,0])),b.BUFFER||(b.BUFFER=m([32,0]));var A=b.DATA,E=b.BUFFER;t.free=function(r){if(n.isBuffer(r))E[d.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var e=r.length||r.byteLength,t=0|d.log2(e);A[t].push(r)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeInt8=t.freeInt16=t.freeInt32=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=i,t.freeArrayBuffer=a,t.freeBuffer=function(r){E[d.log2(r.length)].push(r)},t.malloc=function(r,e){if(void 0===e||"arraybuffer"===e)return o(r);switch(e){case"uint8":return s(r);case"uint16":return u(r);case"uint32":return l(r);case"int8":return f(r);case"int16":return c(r);case"int32":return h(r);case"float":case"float32":return p(r);case"double":case"float64":return _(r);case"uint8_clamped":return g(r);case"buffer":return v(r);case"data":case"dataview":return y(r);default:return null}return null},t.mallocArrayBuffer=o,t.mallocUint8=s,t.mallocUint16=u,t.mallocUint32=l,t.mallocInt8=f,t.mallocInt16=c,t.mallocInt32=h,t.mallocFloat32=t.mallocFloat=p,t.mallocFloat64=t.mallocDouble=_,t.mallocUint8Clamped=g,t.mallocDataView=y,t.mallocBuffer=v,t.clearCache=function(){for(var r=0;r<32;++r)b.UINT8[r].length=0,b.UINT16[r].length=0,b.UINT32[r].length=0,b.INT8[r].length=0,b.INT16[r].length=0,b.INT32[r].length=0,b.FLOAT[r].length=0,b.DOUBLE[r].length=0,b.UINT8C[r].length=0,A[r].length=0,E[r].length=0}}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r("buffer").Buffer)},{"bit-twiddle":2,buffer:3,dup:9}],22:[function(r,e,n){function t(r,e){for(var n=1,t=r.length,a=r[0],i=r[0],o=1;o<t;++o)if(i=a,a=r[o],e(a,i)){if(o===n){n++;continue}r[n++]=a}return r.length=n,r}function a(r){for(var e=1,n=r.length,t=r[0],a=r[0],i=1;i<n;++i,a=t)if(a=t,t=r[i],t!==a){if(i===e){e++;continue}r[e++]=t}return r.length=e,r}function i(r,e,n){return 0===r.length?r:e?(n||r.sort(e),t(r,e)):(n||r.sort(),a(r))}e.exports=i},{}],23:[function(r,e,n){e.exports={printThreshold:7,nFloatingValues:5}},{}],24:[function(r,e,n){e.exports={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array,array:Array}},{}],25:[function(r,e,n){e.exports={ValueError:function(){var r=Error.apply(this,arguments);return r.name=this.constructor.name,r},ConfigError:function(){var r=Error.apply(this,arguments);return r.name=this.constructor.name,r},NotImplementedError:function(){var r=Error.apply(this,arguments);return r.name=this.constructor.name,r}}},{}],26:[function(r,e,n){e.exports=function(r,e,n,t,a){var i=e-1,o=e+t-1,s=r-1,u=r+n-1;return 0!==e&&0!==r?a.selection.get(s,i)-a.selection.get(u,i)-a.selection.get(s,o)+a.selection.get(u,o):0===e&&0===r?a.selection.get(r+n-1,e+t-1):0===e?-a.selection.get(s,e+t-1)+a.selection.get(r+n-1,e+t-1):-a.selection.get(u,i)+a.selection.get(u,o)}},{}],27:[function(r,e,n){var t=r("./area-sum");e.exports=function(r,e,n,a,i){return t(r,e,n,a,i)/(n*a)}},{"./area-sum":26}],28:[function(r,e,n){(function(n){function t(r){return i(a.join(o,r))}var a=r("path"),i=r("./read"),o=a.join(a.resolve(n),"../../data"),s={};Object.defineProperty(s,"digit",{get:function(){return t("five.png")}}),Object.defineProperty(s,"five",{get:function(){return t("five.png")}}),Object.defineProperty(s,"node",{get:function(){return t("nodejs.png")}}),Object.defineProperty(s,"lena",{get:function(){return t("lenna.png")}}),Object.defineProperty(s,"lenna",{get:function(){return t("lenna.png")}}),Object.defineProperty(s,"moon",{get:function(){return t("moon.jpg")}}),e.exports=s}).call(this,"/src/images")},{"./read":32,path:19}],29:[function(r,e,n){var t=r("../ndarray");e.exports=function(r){return new t(r.selection.step(null,-1))}},{"../ndarray":42}],30:[function(r,e,n){e.exports={data:r("./data"),read:r("./read"),save:r("./save"),resize:r("./resize"),sat:r("./sat"),ssat:r("./ssat"),sobel:r("./sobel"),scharr:r("./scharr"),areaSum:r("./area-sum"),areaValue:r("./area-value"),rgb2gray:r("./rgb2gray"),flip:r("./flip")}},{"./area-sum":26,"./area-value":27,"./data":28,"./flip":29,"./read":32,"./resize":33,"./rgb2gray":34,"./sat":35,"./save":36,"./scharr":37,"./sobel":38,"./ssat":39}],31:[function(r,e,n){var t=r("../ndarray"),a=r("cwise/lib/wrapper")({args:["array","array","array"],pre:{body:"{this_isgray=!0}",args:[],thisVars:["this_isgray"],localVars:[]},body:{body:"{_inline_82_arg0_===_inline_82_arg1_&&_inline_82_arg1_===_inline_82_arg2_||(this_isgray=!1)}",args:[{name:"_inline_82_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_82_arg1_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_82_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_isgray"],localVars:[]},post:{body:"{return this_isgray}",args:[],thisVars:["this_isgray"],localVars:[]},debug:!1,funcName:"doCheckIsGrayscaleCwise",blockSize:64});e.exports=function(r){r instanceof t&&(r=r.selection);var e=r.shape;return 1!==e.length&&(2===e.length||3===e.length&&1===e[2]||3===e.length&&(3===e[2]||4===e[2])&&a(r.pick(null,null,0),r.pick(null,null,1),r.pick(null,null,2)))}},{"../ndarray":42,"cwise/lib/wrapper":8}],32:[function(r,e,n){function t(r){var e=r.getContext("2d"),n=e.getImageData(0,0,r.width,r.height),t=[r.width,r.height,4],a=[4,4*r.width,1],s=i(new Uint8Array(n.data),t,a,0),l=s.transpose(1,0);return u(l)&&(l=l.pick(null,null,0)),new o(l)}function a(r){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var t=n.getImageData(0,0,r.width,r.height),a=[r.width,r.height,4],s=[4,4*r.width,1],l=i(new Uint8Array(t.data),a,s,0),f=l.transpose(1,0);return u(f)&&(f=f.pick(null,null,0)),new o(f)}var i=r("ndarray"),o=r("../ndarray"),s=r("../errors"),u=r("./is-grayscale");e.exports=function(r){if(r instanceof HTMLCanvasElement)return t(r);if(r instanceof HTMLImageElement)return a(r);throw new s.ValueError("expect input to be either an HTML Canvas or a (loaded) Image")}},{"../errors":25,"../ndarray":42,"./is-grayscale":31,ndarray:18}],33:[function(r,e,n){var t=r("./utils"),a=r("ndarray"),i=r("../ndarray");e.exports=function(r,e,n){var o=r.shape,s=o[0],u=o[1],l=o[2]||1,f=document.createElement("canvas");f.height=s,f.width=u;var c=f.getContext("2d"),h=c.createImageData(u,s),p=t.setRawData(r.selection,h.data);if(p)throw p;var _=s/e,g=u/n,y=Math.min(_,g),v=e*y,d=n*y,m=(s-y*e)/2,w=(u-y*n)/2;c.putImageData(h,0,0),c.drawImage(f,w,m,d,v,0,0,n,e);var b=c.getImageData(0,0,n,e),A=[0|n,0|e,4],E=[4,4*n|0,1],j=a(new Uint8Array(b.data),A,E,0),x=j.transpose(1,0);return 2===o.length?x=x.pick(null,null,0):3===o.length&&1===l&&(x=x.pick(null,null,0)),new i(x)}},{"../ndarray":42,"./utils":40,ndarray:18}],34:[function(r,e,n){var t=r("../ndarray"),a=r("../utils"),i=r("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_79_arg0_=4899*_inline_79_arg1_+9617*_inline_79_arg2_+1868*_inline_79_arg3_+8192>>14}",args:[{name:"_inline_79_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_79_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_79_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_79_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"rgb2grayCwise",blockSize:64});e.exports=function(r){r instanceof t||(r=new t(r));var e=r.shape,n=e[0],o=e[1],s=e[2]||1;if(1===s)return r;var u=[n,o],l=new t(new Uint8Array(a.shapeSize(u)),u),f=r.selection.pick(null,null,0),c=r.selection.pick(null,null,1),h=r.selection.pick(null,null,2);return i(l.selection,f,c,h),l}},{"../ndarray":42,"../utils":43,"cwise/lib/wrapper":8}],35:[function(r,e,n){var t=r("../ndarray"),a=r("./rgb2gray"),i=r("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_67_arg0_=0!==_inline_67_arg2_[0]&&0!==_inline_67_arg2_[1]?_inline_67_arg1_+_inline_67_arg4_+_inline_67_arg5_-_inline_67_arg3_:0===_inline_67_arg2_[0]&&0===_inline_67_arg2_[1]?_inline_67_arg1_:0===_inline_67_arg2_[0]?_inline_67_arg1_+_inline_67_arg5_:_inline_67_arg1_+_inline_67_arg4_}",args:[{name:"_inline_67_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_67_arg1_",lvalue:!1,rvalue:!0,count:4},{name:"_inline_67_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_67_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_67_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_67_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});e.exports=function(r){var e=a(r),n=e.shape,o=n[0],s=n[1],u=new t(new Uint32Array(o*s),[o,s]);return i(u.selection,e.selection),u}},{"../ndarray":42,"./rgb2gray":34,"cwise/lib/wrapper":8}],36:[function(r,e,n){var t=r("./utils"),a=r("../errors");e.exports=function(r,e){var n=r.shape,i=n[0],o=n[1];if(!(e instanceof HTMLCanvasElement))throw new a.ValueError("expect input to be either an HTML Canvas or a (loaded) Image");var s=document.createElement("canvas");s.height=i,s.width=o;var u=s.getContext("2d"),l=u.createImageData(o,i),f=t.setRawData(r.selection,l.data);if(f)throw f;u.putImageData(l,0,0),u.drawImage(s,o,i),e.getContext("2d").drawImage(s,0,0,o,i,0,0,e.width,e.height)}},{"../errors":25,"./utils":40}],37:[function(r,e,n){var t=r("ndarray-ops"),a=r("../ndarray"),i=r("../utils"),o=r("./rgb2gray"),s=r("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_76_q=3*_inline_76_arg2_+10*_inline_76_arg3_+3*_inline_76_arg4_-3*_inline_76_arg7_-10*_inline_76_arg8_-3*_inline_76_arg9_,_inline_76_s=3*_inline_76_arg2_-3*_inline_76_arg4_+10*_inline_76_arg5_-10*_inline_76_arg6_+3*_inline_76_arg7_-3*_inline_76_arg9_;_inline_76_arg0_=Math.sqrt(_inline_76_s*_inline_76_s+_inline_76_q*_inline_76_q)}",args:[{name:"_inline_76_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_76_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_76_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_76_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_76_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_76_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_76_q","_inline_76_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});e.exports=function(r){var e=o(r),n=e.shape,u=n[0],l=n[1],f=new a(new Float32Array(i.shapeSize(n)),n);return s(f.selection,e.selection),t.assigns(f.selection.pick(0,null),0),t.assigns(f.selection.pick(null,0),0),t.assigns(f.selection.pick(u-1,null),0),t.assigns(f.selection.pick(null,l-1),0),f.divide(16*Math.sqrt(2),!1)}},{"../ndarray":42,"../utils":43,"./rgb2gray":34,"cwise/lib/wrapper":8,"ndarray-ops":17}],38:[function(r,e,n){var t=r("ndarray-ops"),a=r("../ndarray"),i=r("../utils"),o=r("./rgb2gray"),s=r("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_73_q=_inline_73_arg2_+2*_inline_73_arg3_+_inline_73_arg4_-_inline_73_arg7_-2*_inline_73_arg8_-_inline_73_arg9_,_inline_73_s=_inline_73_arg2_-_inline_73_arg4_+2*_inline_73_arg5_-2*_inline_73_arg6_+_inline_73_arg7_-_inline_73_arg9_;_inline_73_arg0_=Math.sqrt(_inline_73_s*_inline_73_s+_inline_73_q*_inline_73_q)}",args:[{name:"_inline_73_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_73_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_73_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_73_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_73_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_73_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_73_q","_inline_73_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});e.exports=function(r){var e=o(r),n=e.shape,u=n[0],l=n[1],f=new a(new Float32Array(i.shapeSize(n)),n);return s(f.selection,e.selection),t.assigns(f.selection.pick(0,null),0),t.assigns(f.selection.pick(null,0),0),t.assigns(f.selection.pick(u-1,null),0),t.assigns(f.selection.pick(null,l-1),0),f.divide(4*Math.sqrt(2),!1)}},{"../ndarray":42,"../utils":43,"./rgb2gray":34,"cwise/lib/wrapper":8,"ndarray-ops":17}],39:[function(r,e,n){var t=r("../ndarray"),a=r("./rgb2gray"),i=r("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_70_arg0_=0!==_inline_70_arg2_[0]&&0!==_inline_70_arg2_[1]?_inline_70_arg1_*_inline_70_arg1_+_inline_70_arg4_+_inline_70_arg5_-_inline_70_arg3_:0===_inline_70_arg2_[0]&&0===_inline_70_arg2_[1]?_inline_70_arg1_*_inline_70_arg1_:0===_inline_70_arg2_[0]?_inline_70_arg1_*_inline_70_arg1_+_inline_70_arg5_:_inline_70_arg1_*_inline_70_arg1_+_inline_70_arg4_}",args:[{name:"_inline_70_arg0_",lvalue:!0,rvalue:!1,count:1
},{name:"_inline_70_arg1_",lvalue:!1,rvalue:!0,count:8},{name:"_inline_70_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_70_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_70_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});e.exports=function(r){var e=a(r),n=e.shape,o=n[0],s=n[1],u=new t(new Uint32Array(o*s),[o,s]);return i(u.selection,e.selection),u}},{"../ndarray":42,"./rgb2gray":34,"cwise/lib/wrapper":8}],40:[function(r,e,n){var t=r("../ndarray");e.exports.getRawData=function(r){r instanceof t&&(r=r.selection);var e,n,a=0,i=r.shape,o=i[0],s=i[1],u=i[2]||1,l=new Uint8Array(o*s*u);if(3===r.shape.length)if(3===u)for(e=0;e<o;++e)for(n=0;n<s;++n)l[a++]=r.get(e,n,0),l[a++]=r.get(e,n,1),l[a++]=r.get(e,n,2);else if(4===u)for(e=0;e<o;++e)for(n=0;n<s;++n)l[a++]=r.get(e,n,0),l[a++]=r.get(e,n,1),l[a++]=r.get(e,n,2),l[a++]=r.get(e,n,3);else{if(1!==u)return new Error("Incompatible array shape");for(e=0;e<o;++e)for(n=0;n<s;++n)l[a++]=r.get(e,n,0)}else{if(2!==r.shape.length)return new Error("Invalid image");for(e=0;e<o;++e)for(n=0;n<s;++n)l[a++]=r.get(e,n)}return l},e.exports.setRawData=function(r,e){var n,t,a,i=0,o=r.shape[0],s=r.shape[1],u=r.shape[2]||1;if(3===r.shape.length)if(3===u)for(n=0;n<o;++n)for(t=0;t<s;++t)e[i++]=r.get(n,t,0),e[i++]=r.get(n,t,1),e[i++]=r.get(n,t,2),e[i++]=255;else if(4===u)for(n=0;n<o;++n)for(t=0;t<s;++t)e[i++]=r.get(n,t,0),e[i++]=r.get(n,t,1),e[i++]=r.get(n,t,2),e[i++]=r.get(n,t,3);else{if(1!==u)return new Error("Incompatible array shape");for(n=0;n<o;++n)for(t=0;t<s;++t)a=r.get(n,t,0),e[i++]=a,e[i++]=a,e[i++]=a,e[i++]=255}else{if(2!==r.shape.length)return new Error("Invalid image");for(n=0;n<o;++n)for(t=0;t<s;++t)a=r.get(n,t),e[i++]=a,e[i++]=a,e[i++]=a,e[i++]=255}}},{"../ndarray":42}],41:[function(r,e,n){function t(r,e){if(0!==r.length&&0!==e.length){for(var n=r.slice().reverse(),t=e.slice().reverse(),a=Math.max(r.length,e.length),i=new Array(a),o=0;o<a;o++)if(n[o]&&1!==n[o])if(t[o]&&1!==t[o]){if(n[o]!==t[o])return;i[o]=n[o]}else i[o]=n[o];else i[o]=t[o];return i.reverse()}}function a(r,e){return W.new(r).add(e)}function i(r,e){return W.new(r).multiply(e)}function o(r,e){return W.new(r).divide(e)}function s(r,e){return W.new(r).subtract(e)}function u(r,e){return W.new(r).equal(e)}function l(r){return W.new(r).flatten()}function f(r,e){return W.new(r).reshape(e)}function c(r){return W.new(r).exp()}function h(r){return W.new(r).sqrt()}function p(r,e){return W.new(r).pow(e)}function _(r){return W.new(r).sum()}function g(r){return W.new(r).mean()}function y(r){return W.new(r).std()}function v(r){return W.new(r).min()}function d(r){return W.new(r).max()}function m(r,e){return W.new(r).transpose(e)}function w(r){return W.new(r).negative()}function b(r,e,n,t){if(1===arguments.length)return b(0,r,1,void 0);if(2===arguments.length&&Q.isNumber(e))return b(r,e,1,void 0);if(2===arguments.length)return b(0,r,1,e);if(3===arguments.length&&!Q.isNumber(n))return b(r,e,1,n);for(var a=[],i=0;r<e;)a[i++]=r,r+=n;return W.new(a,t)}function A(r,e){Q.isNumber(r)&&r>=0&&(r=[r]);var n=Q.shapeSize(r),t=Q.getType(e),a=new W(new t(n),r);return"array"===a.dtype&&$.assigns(a.selection,0),a}function E(r,e){Q.isNumber(r)&&r>=0&&(r=[r]);var n=Q.shapeSize(r),t=Q.getType(e),a=new W(new t(n),r);return $.assigns(a.selection,1),a}function j(r,e){Q.isNumber(r)&&r>=0&&(r=[r]);var n=Q.shapeSize(r),t=Q.getType(e);return new W(new t(n),r)}function x(r){if(0===arguments.length)return W.new(Math.random());r=1===arguments.length?Q.isNumber(r)?[0|r]:r:[].slice.call(arguments);var e=Q.shapeSize(r),n=new W(new Float64Array(e),r);return $.random(n.selection),n}function T(r){var e=W.new(r).exp(),n=e.sum();return $.divseq(e.selection,n),e}function V(r,e){return r=W.new(r).clone(),e=e||1,er(r.selection,e),r}function R(r,e,n){1===arguments.length?(e=0,n=1):2===arguments.length&&(n=1);var t=r instanceof W?r.clone():W.new(r);return nr(t.selection,e,n),t}function S(r,e){e=e||.001;var n=r instanceof W?r.clone():W.new(r);return tr(n.selection,e),n}function I(r){var e=r instanceof W?r.clone():W.new(r);return ar(e.selection),e}function k(r){var e=r instanceof W?r.clone():W.new(r);return $.abseq(e.selection),e}function B(r){var e=r instanceof W?r.clone():W.new(r);return $.coseq(e.selection),e}function P(r){var e=r instanceof W?r.clone():W.new(r);return $.acoseq(e.selection),e}function U(r){var e=r instanceof W?r.clone():W.new(r);return $.sineq(e.selection),e}function M(r){var e=r instanceof W?r.clone():W.new(r);return $.asineq(e.selection),e}function N(r){var e=r instanceof W?r.clone():W.new(r);return $.taneq(e.selection),e}function O(r){var e=r instanceof W?r.clone():W.new(r);return $.ataneq(e.selection),e}function C(r,e){return W.new(r).dot(e)}function Y(r){arguments.length>1&&(r=[].slice.call(arguments));var e,n;for(e=0;e<r.length;e++)n=r[e],r[e]=n instanceof W?n.tolist():Q.isNumber(n)?[n]:n;var t=r[0];for(e=1;e<r.length;e++){n=r[e];var a=Q.getShape(t),i=Q.getShape(n);if(a.length!==i.length)throw new rr.ValueError("all the input arrays must have same number of dimensions");if(1===a.length&&1===i.length)t=t.concat(n);else if(2===a.length&&2===i.length&&a[0]===i[0]||1===a.length&&2===i.length&&a[0]===i[0]||2===a.length&&1===i.length&&a[0]===i[0])for(var o=0;o<a[0];o++)t[o]=t[o].concat(n[o]);else{if(!(3===a.length&&3===i.length&&a[0]===i[0]&&a[1]===i[1]||2===a.length&&3===i.length&&a[0]===i[0]&&a[1]===i[1]||3===a.length&&2===i.length&&a[0]===i[0]&&a[1]===i[1]))throw new rr.ValueError('cannot concatenate  "'+a+'" with "'+i+'"');for(var s=0;s<a[0];s++){for(var u=new Array(a[1]),l=0;l<a[1];l++)u[l]=t[s][l].concat(n[s][l]);t[s]=u}}}return W.new(t,r[0].dtype)}function D(r){return W.new(r).round()}function q(r,e){return W.new(r).convolve(e)}function L(r,e){return W.new(r).fftconvolve(e)}function z(r){r=r instanceof W?r.clone():W.new(r);var e=r.shape,n=e.length;if(2!==e[n-1])throw new rr.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var t=new Array(n),a=new Array(n);return t[n-1]=0,a[n-1]=1,G(1,r.selection.pick.apply(r.selection,t),r.selection.pick.apply(r.selection,a)),r}function F(r){r=r instanceof W?r.clone():W.new(r);var e=r.shape,n=e.length;if(2!==e[n-1])throw new rr.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var t=new Array(n),a=new Array(n);return t[n-1]=0,a[n-1]=1,G(-1,r.selection.pick.apply(r.selection,t),r.selection.pick.apply(r.selection,a)),r}function H(r){return W.new(r).diag()}function J(r,e){for(var n=A([r,r],e),t=0;t<r;t++)n.set(t,t,1);return n}var K=r("ndarray"),$=r("ndarray-ops"),G=r("ndarray-fft"),X=r("./config"),Z=r("./dtypes"),W=r("./ndarray"),Q=r("./utils"),rr=r("./errors"),er=r("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_43_arg0_=_inline_43_arg0_<-30?0:_inline_43_arg0_>30?1:1/(1+Math.exp(-1*_inline_43_arg1_*_inline_43_arg0_))}",args:[{name:"_inline_43_arg0_",lvalue:!0,rvalue:!0,count:4},{name:"_inline_43_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"sigmoidCwise",blockSize:64}),nr=r("cwise/lib/wrapper")({args:["array","scalar","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_46_arg0_=Math.min(Math.max(_inline_46_arg1_,_inline_46_arg0_),_inline_46_arg2_)}",args:[{name:"_inline_46_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_46_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"clipCwise",blockSize:64}),tr=r("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_49_arg0_=Math.max(_inline_49_arg1_*_inline_49_arg0_,_inline_49_arg0_)}",args:[{name:"_inline_49_arg0_",lvalue:!0,rvalue:!0,count:3},{name:"_inline_49_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"leakyReluCwise",blockSize:64}),ar=r("cwise/lib/wrapper")({args:["array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_52_arg0_=(Math.exp(2*_inline_52_arg0_)-1)/(Math.exp(2*_inline_52_arg0_)+1)}",args:[{name:"_inline_52_arg0_",lvalue:!0,rvalue:!0,count:3}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"tanhCwise",blockSize:64});e.exports={config:X,dtypes:Z,NdArray:W,ndarray:K,array:W.new,arange:b,reshape:f,zeros:A,ones:E,empty:j,flatten:l,random:x,softmax:T,sigmoid:V,leakyRelu:S,abs:k,arccos:P,arcsin:M,arctan:O,cos:B,sin:U,tan:N,tanh:I,clip:R,exp:c,sqrt:h,power:p,sum:_,mean:g,std:y,dot:C,add:a,subtract:s,multiply:i,divide:o,negative:w,equal:u,max:d,min:v,concatenate:Y,transpose:m,errors:rr,broadcast:t,round:D,convolve:q,fftconvolve:L,fft:z,ifft:F,diag:H,identity:J,int8:function(r){return W.new(r,"int8")},uint8:function(r){return W.new(r,"uint8")},int16:function(r){return W.new(r,"int16")},uint16:function(r){return W.new(r,"uint16")},int32:function(r){return W.new(r,"int32")},uint32:function(r){return W.new(r,"uint32")},float32:function(r){return W.new(r,"float32")},float64:function(r){return W.new(r,"float64")},images:r("./images")}},{"./config":23,"./dtypes":24,"./errors":25,"./images":30,"./ndarray":42,"./utils":43,"cwise/lib/wrapper":8,ndarray:18,"ndarray-fft":13,"ndarray-ops":17}],42:[function(r,e,n){function t(r,e){if(r instanceof g)return r;var n=_.getType(e);if(_.isNumber(r))return n!==Array?new g(new n([r]),[1]):new g([r],[1]);var t=_.getShape(r);return t.length>1&&(r=_.flatten(r,!0)),r instanceof n||(r=new n(r)),new g(r,t)}function a(r,e){e=e||0;var n=0|r[e];if(n<=0)return[];var t,i=new Array(n);if(e===r.length-1)for(t=0;t<n;++t)i[t]=0;else for(t=0;t<n;++t)i[t]=a(r,e+1);return i}function i(r){var e=a(r.shape,0);return m(r,e),e}function o(r){return String(Number((r||0).toFixed(h.nFloatingValues)))}var s=r("ndarray"),u=r("ndarray-ops"),l=r("ndarray-gemm"),f=r("ndarray-fft"),c=r("typedarray-pool"),h=r("./config"),p=r("./errors"),_=r("./utils"),g=function(){if(1===arguments.length)this.selection=arguments[0];else{if(0===arguments.length)throw new p.ValueError("Required argument 'data' not found");this.selection=s.apply(null,arguments)}Object.defineProperty(this,"size",{get:function(){return this.selection.size}.bind(this)}),Object.defineProperty(this,"shape",{get:function(){return this.selection.shape}.bind(this)}),Object.defineProperty(this,"ndim",{get:function(){return this.selection.shape.length}.bind(this)}),Object.defineProperty(this,"dtype",{get:function(){return this.selection.dtype}.bind(this),set:function(r){var e=_.getType(r);e!==_.getType(this.dtype)&&(this.selection=s(new e(this.selection.data),this.selection.shape,this.selection.stride,this.selection.offset))}.bind(this)}),Object.defineProperty(this,"T",{get:function(){return this.transpose()}.bind(this)})};g.prototype.get=function(){for(var r=arguments.length,e=0;e<r;e++)arguments[e]<0&&(arguments[e]+=this.shape[e]);return this.selection.get.apply(this.selection,arguments)},g.prototype.set=function(){return this.selection.set.apply(this.selection,arguments)},g.prototype.slice=function(){for(var r=this.ndim,e=new Array(r),n=new Array(r),t=new Array(r),a=this.shape,i=0;i<r;i++){var o=arguments[i];if("undefined"==typeof o)break;if(null!==o)if(_.isNumber(o))n[i]=o<0?o+a[i]:o,e[i]=null,t[i]=1;else{var s=o[0]<0?o[0]+a[i]:o[0],u=o[1]<0?o[1]+a[i]:o[1];n[i]=u?s:0,e[i]=u?u-s:s,t[i]=o[2]||1}}var l=this.selection.lo.apply(this.selection,n),f=l.hi.apply(l,e),c=f.step.apply(f,t);return new g(c)},g.prototype.pick=function(r){return new g(this.selection.pick.apply(this.selection,arguments))},g.prototype.lo=function(){return new g(this.selection.lo.apply(this.selection,arguments))},g.prototype.hi=function(){return new g(this.selection.hi.apply(this.selection,arguments))},g.prototype.step=function(){return new g(this.selection.step.apply(this.selection,arguments))},g.prototype.flatten=function(){if(1===this.ndim)return new g(this.selection);var r=_.getType(this.dtype),e=_.flatten(this.tolist(),!0);return e instanceof r||(e=new r(e)),new g(e,[this.size])},g.prototype.reshape=function(r){if(0===arguments.length)throw new p.ValueError("function takes at least one argument (0 given)");if(1===arguments.length&&_.isNumber(r)&&r===-1&&(r=[_.shapeSize(this.shape)]),1===arguments.length&&_.isNumber(r)&&(r=[r]),arguments.length>1&&(r=[].slice.call(arguments)),r.filter(function(r){return r===-1}).length>1)throw new p.ValueError("can only specify one unknown dimension");var e=_.shapeSize(r);if(r=r.map(function(r){return r===-1?-1*this.size/e:r}.bind(this)),this.size!==_.shapeSize(r))throw new p.ValueError("total size of new array must be unchanged");var n,t,a,i,o=this.selection.shape,s=this.selection.offset,u=this.selection.stride,l=o.length,f=r.length;if(l===f){var c=!0;for(a=0;a<f;++a)if(o[a]!==r[a]){c=!1;break}if(c)return new g(this.selection.data,o,u,s)}else if(1===l){for(n=new Array(f),a=f-1,i=1;a>=0;--a)n[a]=i,i*=r[a];for(t=s,a=0;a<f;++a)n[a]<0&&(t-=(r[a]-1)*n[a]);return new g(this.selection.data,r,n,t)}var h=Math.min(l,f),y=!0;for(a=0;a<h;a++)if(o[a]!==r[a]){y=!1;break}if(y){for(n=new Array(f),a=0;a<f;a++)n[a]=u[a]||1;return t=s,new g(this.selection.data,r,n,t)}return this.flatten().reshape(r)},g.prototype.transpose=function(r){if(0===arguments.length){var e=this.ndim;r=new Array(e);for(var n=0;n<e;n++)r[n]=e-n-1}else arguments.length>1&&(r=arguments);return new g(this.selection.transpose.apply(this.selection,r))},g.prototype.dot=function(r){r=r instanceof g?r:t(r,this.dtype);var e=this.shape,n=r.shape;if(2===e.length&&2===n.length&&e[1]===n[0]){var a=_.getType(this.dtype),i=new g(new a(e[0]*n[1]),[e[0],n[1]]);return l(i.selection,this.selection,r.selection),i}if(1===e.length&&2===n.length&&e[0]===n[0])return this.reshape([e[0],1]).T.dot(r).reshape(n[1]);if(2===e.length&&1===n.length&&e[1]===n[0])return this.dot(r.reshape([n[0],1])).reshape(e[0]);if(1===e.length&&1===n.length&&e[0]===n[0])return this.reshape([e[0],1]).T.dot(r.reshape([n[0],1])).reshape([1]);throw new p.ValueError("cannot compute the matrix product of given arrays")},g.prototype.assign=function(r,e){1===arguments.length&&(e=!0);var n=e?this.clone():this;return _.isNumber(r)?(u.assigns(n.selection,r),n):(r=t(r,this.dtype),u.assign(n.selection,r.selection),n)},g.prototype.add=function(r,e){1===arguments.length&&(e=!0);var n=e?this.clone():this;return _.isNumber(r)?(u.addseq(n.selection,r),n):(r=t(r,this.dtype),u.addeq(n.selection,r.selection),n)},g.prototype.subtract=function(r,e){1===arguments.length&&(e=!0);var n=e?this.clone():this;return _.isNumber(r)?(u.subseq(n.selection,r),n):(r=t(r,this.dtype),u.subeq(n.selection,r.selection),n)},g.prototype.multiply=function(r,e){1===arguments.length&&(e=!0);var n=e?this.clone():this;return _.isNumber(r)?(u.mulseq(n.selection,r),n):(r=t(r,this.dtype),u.muleq(n.selection,r.selection),n)},g.prototype.divide=function(r,e){1===arguments.length&&(e=!0);var n=e?this.clone():this;return _.isNumber(r)?(u.divseq(n.selection,r),n):(r=t(r,this.dtype),u.diveq(n.selection,r.selection),n)},g.prototype.pow=function(r,e){1===arguments.length&&(e=!0);var n=e?this.clone():this;return _.isNumber(r)?(u.powseq(n.selection,r),n):(r=t(r,this.dtype),u.poweq(n.selection,r.selection),n)},g.prototype.exp=function(r){0===arguments.length&&(r=!0);var e=r?this.clone():this;return u.expeq(e.selection),e},g.prototype.sqrt=function(r){0===arguments.length&&(r=!0);var e=r?this.clone():this;return u.sqrteq(e.selection),e},g.prototype.max=function(){return 0===this.selection.size?null:u.sup(this.selection)},g.prototype.min=function(){return 0===this.selection.size?null:u.inf(this.selection)},g.prototype.sum=function(){return u.sum(this.selection)},g.prototype.std=function(){var r=this.clone();u.powseq(r.selection,2);var e=this.mean(),n=Math.abs(u.sum(r.selection)/_.shapeSize(this.shape)-e*e);return n>0?Math.sqrt(n):0},g.prototype.mean=function(){return u.sum(this.selection)/_.shapeSize(this.shape)},g.prototype.tolist=function(){return i(this.selection)},g.prototype.valueOf=function(){return this.tolist()},g.prototype.toString=function(){function r(n,t){if(_.isString(t))return t;if(_.isNumber(t)){var a=o(t);return new Array(Math.max(0,e-a.length+2)).join(" ")+a}n=n||0;var i,s=h.printThreshold,u=s/2|0;return i=t.length>s?[].concat(t.slice(0,u),[" ..."],t.slice(t.length-u)):t,new Array(n+1).join(" ")+"["+i.map(function(e,t){return r(0===t&&0===n?1:n+1,e)}).join(",")+"]"}var e=o(this.max()).length,n=/\]\,(\s*)\[/g,t="],\n$1      [",a=/\]\,(\s+)...\,(\s+)\[/g,i="],\n$2       ...\n$2      [",s=/\[\s+\[/g,u="[[",l=JSON.stringify(this.tolist(),r).replace(n,t).replace(s,u).replace(s,u).replace(a,i).slice(2,-1);switch(this.dtype){case"array":return"array(["+l+")";default:return"array(["+l+", dtype="+this.dtype+")"}},g.prototype.inspect=g.prototype.toString,g.prototype.toJSON=function(){return JSON.stringify(this.tolist())},g.prototype.clone=function(){var r=this.selection;return new g("undefined"==typeof r.data.slice?s([].slice.apply(r.data),r.shape,r.stride,r.offset):s(r.data.slice(),r.shape,r.stride,r.offset))},g.prototype.equal=function(r){if(r=t(r),this.size!==r.size||this.ndim!==r.ndim)return!1;for(var e=this.ndim,n=0;n<e;n++)if(this.shape[n]!==r.shape[n])return!1;return u.all(u.eqeq(this.selection,r.selection))},g.prototype.round=function(r){0===arguments.length&&(r=!0);var e=r?this.clone():this;return u.roundeq(e.selection),e},g.prototype.negative=function(){var r=this.clone();return u.neg(r.selection,this.selection),r},g.prototype.diag=function(){var r=this.ndim;if(1===r){var e=_.getType(this.dtype),n=[this.shape[0],this.shape[0]],t=new g(new e(_.shapeSize(n)),n);"array"===t.dtype&&u.assigns(t.selection,0);for(var a=0;a<this.shape[0];a++)t.set(a,a,this.get(a));return t}for(var i=this.shape,o=this.selection.stride,s=1<<30,l=0,a=0;a<r;++a)s=0|Math.min(s,i[a]),l+=o[a];return new g(this.selection.data,[s],[l],this.selection.offset)},g.prototype.iteraxis=function(r,e){var n=this.shape;if(r===-1&&(r=n.length-1),r<0||r>n.length-1)throw new p.ValueError("invalid axis");for(var a=0;a<n[r];a++){for(var o=new Array(r+1),s=0;s<r+1;s++)o[s]=s===r?a:null;var u=this.selection.pick.apply(this.selection,o),l=t(i(u),this.dtype);e(l,a)}};var y=r("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_55_c=_inline_55_arg2_,_inline_55_f=_inline_55_arg3_,_inline_55_i=_inline_55_arg0_,_inline_55_o=_inline_55_arg1_,_inline_55_t=_inline_55_i*(_inline_55_c+_inline_55_f);_inline_55_arg0_=_inline_55_t-_inline_55_f*(_inline_55_i+_inline_55_o),_inline_55_arg1_=_inline_55_t+_inline_55_c*(_inline_55_o-_inline_55_i)}",args:[{name:"_inline_55_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_55_arg1_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_55_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_55_c","_inline_55_f","_inline_55_i","_inline_55_o","_inline_55_t"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),v=r("cwise/lib/wrapper")({args:["array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_58_arg0_=_inline_58_arg11_*_inline_58_arg10_+_inline_58_arg12_*_inline_58_arg9_+_inline_58_arg13_*_inline_58_arg8_+_inline_58_arg14_*_inline_58_arg7_+_inline_58_arg1_*_inline_58_arg6_+_inline_58_arg15_*_inline_58_arg5_+_inline_58_arg16_*_inline_58_arg4_+_inline_58_arg17_*_inline_58_arg3_+_inline_58_arg18_*_inline_58_arg2_}",args:[{name:"_inline_58_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_58_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg7_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg9_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg10_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg11_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg12_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg13_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg14_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg15_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg16_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg17_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg18_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),d=r("cwise/lib/wrapper")({args:["index","array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-2,-2],array:1},{offset:[-2,-1],array:1},{offset:[-2,0],array:1},{offset:[-2,1],array:1},{offset:[-2,2],array:1},{offset:[-1,-2],array:1},{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[-1,2],array:1},{offset:[0,-2],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[0,2],array:1},{offset:[1,-2],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1},{offset:[1,2],array:1},{offset:[2,-2],array:1},{offset:[2,-1],array:1},{offset:[2,0],array:1},{offset:[2,1],array:1},{offset:[2,2],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_61_arg1_=_inline_61_arg0_[0]<2||_inline_61_arg0_[1]<2?0:_inline_61_arg28_*_inline_61_arg27_+_inline_61_arg29_*_inline_61_arg26_+_inline_61_arg30_*_inline_61_arg25_+_inline_61_arg31_*_inline_61_arg24_+_inline_61_arg32_*_inline_61_arg23_+_inline_61_arg33_*_inline_61_arg22_+_inline_61_arg34_*_inline_61_arg21_+_inline_61_arg35_*_inline_61_arg20_+_inline_61_arg36_*_inline_61_arg19_+_inline_61_arg37_*_inline_61_arg18_+_inline_61_arg38_*_inline_61_arg17_+_inline_61_arg39_*_inline_61_arg16_+_inline_61_arg2_*_inline_61_arg15_+_inline_61_arg40_*_inline_61_arg14_+_inline_61_arg41_*_inline_61_arg13_+_inline_61_arg42_*_inline_61_arg12_+_inline_61_arg43_*_inline_61_arg11_+_inline_61_arg44_*_inline_61_arg10_+_inline_61_arg45_*_inline_61_arg9_+_inline_61_arg46_*_inline_61_arg8_+_inline_61_arg47_*_inline_61_arg7_+_inline_61_arg48_*_inline_61_arg6_+_inline_61_arg49_*_inline_61_arg5_+_inline_61_arg50_*_inline_61_arg4_+_inline_61_arg51_*_inline_61_arg3_}",args:[{name:"_inline_61_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_61_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_61_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg7_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg9_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg10_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg11_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg12_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg13_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg14_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg15_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg16_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg17_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg18_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg19_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg20_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg21_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg22_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg23_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg24_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg25_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg26_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg27_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg28_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg29_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg30_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg31_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg32_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg33_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg34_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg35_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg36_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg37_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg38_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg39_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg40_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg41_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg42_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg43_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg44_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg45_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg46_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg47_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg48_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg49_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg50_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg51_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});g.prototype.convolve=function(r){r=g.new(r);var e=this.ndim;if(e!==r.ndim)throw new p.ValueError("arrays must have the same dimensions");for(var n=new Array(e),t=new Array(e),a=this.selection,i=this.shape,o=r.selection,s=r.shape,u=0;u<e;u++){var l=i[u]-s[u]+1;if(l<0)throw new p.ValueError("filter cannot be greater than the array");n[u]=l,t[u]=-1}if(2===e&&3===s[0]&&3===s[1]){var f=new g(new Float32Array(_.shapeSize(i)),i);return v(f.selection,a,o.get(0,0),o.get(0,1),o.get(0,2),o.get(1,0),o.get(1,1),o.get(1,2),o.get(2,0),o.get(2,1),o.get(2,2)),f.lo(1,1).hi(n[0],n[1])}if(3===e&&1===s[2]&&1===i[2]&&3===s[0]&&3===s[1]){var c=new g(new Float32Array(_.shapeSize(i)),i);return v(c.selection.pick(null,null,0),a.pick(null,null,0),o.get(0,0,0),o.get(0,1,0),o.get(0,2,0),o.get(1,0,0),o.get(1,1,0),o.get(1,2,0),o.get(2,0,0),o.get(2,1,0),o.get(2,2,0)),c.lo(1,1).hi(n[0],n[1])}if(2===e&&5===s[0]&&5===s[1]){var h=new g(new Float32Array(_.shapeSize(i)),i);return d(h.selection,a,o.get(0,0),o.get(0,1),o.get(0,2),o.get(0,3),o.get(0,4),o.get(1,0),o.get(1,1),o.get(1,2),o.get(1,3),o.get(1,4),o.get(2,0),o.get(2,1),o.get(2,2),o.get(2,3),o.get(2,4),o.get(3,0),o.get(3,1),o.get(3,2),o.get(3,3),o.get(3,4),o.get(4,0),o.get(4,1),o.get(4,2),o.get(4,3),o.get(4,4)),h.lo(2,2).hi(n[0],n[1])}if(3===e&&1===s[2]&&1===i[2]&&5===s[0]&&5===s[1]){var y=new g(new Float32Array(_.shapeSize(i)),i);return d(y.selection,a,o.get(0,0,0),o.get(0,1,0),o.get(0,2,0),o.get(0,3,0),o.get(0,4,0),o.get(1,0,0),o.get(1,1,0),o.get(1,2,0),o.get(1,3,0),o.get(1,4,0),o.get(2,0,0),o.get(2,1,0),o.get(2,2,0),o.get(2,3,0),o.get(2,4,0),o.get(3,0,0),o.get(3,1,0),o.get(3,2,0),o.get(3,3,0),o.get(3,4,0),o.get(4,0,0),o.get(4,1,0),o.get(4,2,0),o.get(4,3,0),o.get(4,4,0)),y.lo(2,2).hi(n[0],n[1])}return this.fftconvolve(r)},g.prototype.fftconvolve=function(r){if(r=g.new(r),this.ndim!==r.ndim)throw new p.ValueError("arrays must have the same dimensions");var e,n=this.selection,t=r.selection,a=this.ndim,i=1,o=new Array(a),l=new Array(a),h=new Array(a);for(e=a-1;e>=0;--e)l[e]=n.shape[e],o[e]=i,i*=l[e],h[e]=n.shape[e]-t.shape[e]+1;var v=_.getType(n.dtype),d=new g(new v(_.shapeSize(h)),h),m=d.selection,w=c.mallocDouble(i),b=s(w,l,o,0);u.assigns(b,0),u.assign(b.hi.apply(b,n.shape),n);var A=c.mallocDouble(i),E=s(A,l,o,0);u.assigns(E,0),f(1,b,E);var j=c.mallocDouble(i),x=s(j,l,o,0);u.assigns(x,0),u.assign(x.hi.apply(x,t.shape),t);var T=c.mallocDouble(i),V=s(T,l,o,0);u.assigns(V,0),f(1,x,V),y(b,E,x,V),f(-1,b,E);var R=new Array(a),S=new Array(a),I=!1;for(e=0;e<a;++e)m.shape[e]>l[e]&&(I=!0),S[e]=t.shape[e]-1,R[e]=Math.min(m.shape[e],l[e]-S[e]);var k;return I&&u.assign(m,0),k=b.lo.apply(b,S),k=k.hi.apply(k,R),u.assign(m.hi.apply(m,R),k),c.freeDouble(w),c.freeDouble(A),c.freeDouble(j),c.freeDouble(T),d},g.new=t,e.exports=g;var m=r("cwise/lib/wrapper")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_64_a,_inline_64_e=_inline_64_arg1_;for(_inline_64_a=0;_inline_64_a<_inline_64_arg2_.length-1;++_inline_64_a)_inline_64_e=_inline_64_e[_inline_64_arg2_[_inline_64_a]];_inline_64_e[_inline_64_arg2_[_inline_64_arg2_.length-1]]=_inline_64_arg0_}",args:[{name:"_inline_64_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_64_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_64_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_64_a","_inline_64_e"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"unpackCwise",blockSize:64})},{"./config":23,"./errors":25,"./utils":43,"cwise/lib/wrapper":8,ndarray:18,"ndarray-fft":13,"ndarray-gemm":15,"ndarray-ops":17,"typedarray-pool":21}],43:[function(r,e,n){function t(r){return"number"==typeof r}function a(r){return"string"==typeof r}function i(r){return"function"==typeof r}function o(r,e,n){n=n||[];for(var a=-1,i=r.length;++a<i;){var s=r[a];t(s)?n[n.length]=s:e?o(s,e,n):n.push(s)}return n}function s(r){for(var e=1,n=0;n<r.length;n++)e*=r[n];return e}function u(r){return i(r)?r:c[r]||Array}function l(r){for(var e=[];"object"===("undefined"==typeof r?"undefined":_typeof(r));)e.push(r.length),r=r[0];return e}function f(r){var e,n;return"object"===("undefined"==typeof r?"undefined":_typeof(r))?(e=r[0],"object"===("undefined"==typeof e?"undefined":_typeof(e))?(n=e[0],"object"===("undefined"==typeof n?"undefined":_typeof(n))?l(r):[r.length,e.length]):[r.length]):[]}var c=r("./dtypes");e.exports={isNumber:t,isString:a,isFunction:i,flatten:o,shapeSize:s,getType:u,getShape:f}},{"./dtypes":24}]},{},[41])(41)})}).call(e,function(){return this}(),n(4).Buffer)},function(r,e,n){(function(r){function t(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()&&"function"==typeof r.subarray&&0===r.subarray(1,1).byteLength}catch(r){return!1}}function a(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(r,e){if(a()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=o.prototype):(null===r&&(r=new o(e)),r.length=e),r}function o(r,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(r,e,n);if("number"==typeof r){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,r)}return s(this,r,e,n)}function s(r,e,n,t){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(r,e,n,t):"string"==typeof e?c(r,e,n):_(r,e)}function u(r){if("number"!=typeof r)throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function l(r,e,n,t){return u(e),e<=0?i(r,e):void 0!==n?"string"==typeof t?i(r,e).fill(n,t):i(r,e).fill(n):i(r,e)}function f(r,e){if(u(e),r=i(r,e<0?0:0|g(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;
return r}function c(r,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var t=0|v(e,n);r=i(r,t);var a=r.write(e,n);return a!==t&&(r=r.slice(0,a)),r}function h(r,e){var n=e.length<0?0:0|g(e.length);r=i(r,n);for(var t=0;t<n;t+=1)r[t]=255&e[t];return r}function p(r,e,n,t){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(t||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===t?new Uint8Array(e):void 0===t?new Uint8Array(e,n):new Uint8Array(e,n,t),o.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=o.prototype):r=h(r,e),r}function _(r,e){if(o.isBuffer(e)){var n=0|g(e.length);return r=i(r,n),0===r.length?r:(e.copy(r,0,0,n),r)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(r,0):h(r,e);if("Buffer"===e.type&&Q(e.data))return h(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(r){if(r>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|r}function y(r){return+r!=r&&(r=0),o.alloc(+r)}function v(r,e){if(o.isBuffer(r))return r.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;"string"!=typeof r&&(r=""+r);var n=r.length;if(0===n)return 0;for(var t=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(r).length;default:if(t)return H(r).length;e=(""+e).toLowerCase(),t=!0}}function d(r,e,n){var t=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(r||(r="utf8");;)switch(r){case"hex":return P(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return B(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,n);default:if(t)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),t=!0}}function m(r,e,n){var t=r[e];r[e]=r[n],r[n]=t}function w(r,e,n,t,a){if(0===r.length)return-1;if("string"==typeof n?(t=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:r.length-1),n<0&&(n=r.length+n),n>=r.length){if(a)return-1;n=r.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof e&&(e=o.from(e,t)),o.isBuffer(e))return 0===e.length?-1:b(r,e,n,t,a);if("number"==typeof e)return e=255&e,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(r,e,n):Uint8Array.prototype.lastIndexOf.call(r,e,n):b(r,[e],n,t,a);throw new TypeError("val must be string, number or Buffer")}function b(r,e,n,t,a){function i(r,e){return 1===o?r[e]:r.readUInt16BE(e*o)}var o=1,s=r.length,u=e.length;if(void 0!==t&&(t=String(t).toLowerCase(),"ucs2"===t||"ucs-2"===t||"utf16le"===t||"utf-16le"===t)){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}var l;if(a){var f=-1;for(l=n;l<s;l++)if(i(r,l)===i(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===u)return f*o}else f!==-1&&(l-=l-f),f=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var c=!0,h=0;h<u;h++)if(i(r,l+h)!==i(e,h)){c=!1;break}if(c)return l}return-1}function A(r,e,n,t){n=Number(n)||0;var a=r.length-n;t?(t=Number(t),t>a&&(t=a)):t=a;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");t>i/2&&(t=i/2);for(var o=0;o<t;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;r[n+o]=s}return o}function E(r,e,n,t){return G(H(e,r.length-n),r,n,t)}function j(r,e,n,t){return G(J(e),r,n,t)}function x(r,e,n,t){return j(r,e,n,t)}function T(r,e,n,t){return G($(e),r,n,t)}function V(r,e,n,t){return G(K(e,r.length-n),r,n,t)}function R(r,e,n){return 0===e&&n===r.length?Z.fromByteArray(r):Z.fromByteArray(r.slice(e,n))}function S(r,e,n){n=Math.min(r.length,n);for(var t=[],a=e;a<n;){var i=r[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s<=n){var u,l,f,c;switch(s){case 1:i<128&&(o=i);break;case 2:u=r[a+1],128===(192&u)&&(c=(31&i)<<6|63&u,c>127&&(o=c));break;case 3:u=r[a+1],l=r[a+2],128===(192&u)&&128===(192&l)&&(c=(15&i)<<12|(63&u)<<6|63&l,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:u=r[a+1],l=r[a+2],f=r[a+3],128===(192&u)&&128===(192&l)&&128===(192&f)&&(c=(15&i)<<18|(63&u)<<12|(63&l)<<6|63&f,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,t.push(o>>>10&1023|55296),o=56320|1023&o),t.push(o),a+=s}return I(t)}function I(r){var e=r.length;if(e<=rr)return String.fromCharCode.apply(String,r);for(var n="",t=0;t<e;)n+=String.fromCharCode.apply(String,r.slice(t,t+=rr));return n}function k(r,e,n){var t="";n=Math.min(r.length,n);for(var a=e;a<n;++a)t+=String.fromCharCode(127&r[a]);return t}function B(r,e,n){var t="";n=Math.min(r.length,n);for(var a=e;a<n;++a)t+=String.fromCharCode(r[a]);return t}function P(r,e,n){var t=r.length;(!e||e<0)&&(e=0),(!n||n<0||n>t)&&(n=t);for(var a="",i=e;i<n;++i)a+=F(r[i]);return a}function U(r,e,n){for(var t=r.slice(e,n),a="",i=0;i<t.length;i+=2)a+=String.fromCharCode(t[i]+256*t[i+1]);return a}function M(r,e,n){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(r,e,n,t,a,i){if(!o.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(n+t>r.length)throw new RangeError("Index out of range")}function O(r,e,n,t){e<0&&(e=65535+e+1);for(var a=0,i=Math.min(r.length-n,2);a<i;++a)r[n+a]=(e&255<<8*(t?a:1-a))>>>8*(t?a:1-a)}function C(r,e,n,t){e<0&&(e=4294967295+e+1);for(var a=0,i=Math.min(r.length-n,4);a<i;++a)r[n+a]=e>>>8*(t?a:3-a)&255}function Y(r,e,n,t,a,i){if(n+t>r.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(r,e,n,t,a){return a||Y(r,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(r,e,n,t,23,4),n+4}function q(r,e,n,t,a){return a||Y(r,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(r,e,n,t,52,8),n+8}function L(r){if(r=z(r).replace(er,""),r.length<2)return"";for(;r.length%4!==0;)r+="=";return r}function z(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function F(r){return r<16?"0"+r.toString(16):r.toString(16)}function H(r,e){e=e||1/0;for(var n,t=r.length,a=null,i=[],o=0;o<t;++o){if(n=r.charCodeAt(o),n>55295&&n<57344){if(!a){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===t){(e-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(e-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function J(r){for(var e=[],n=0;n<r.length;++n)e.push(255&r.charCodeAt(n));return e}function K(r,e){for(var n,t,a,i=[],o=0;o<r.length&&!((e-=2)<0);++o)n=r.charCodeAt(o),t=n>>8,a=n%256,i.push(a),i.push(t);return i}function $(r){return Z.toByteArray(L(r))}function G(r,e,n,t){for(var a=0;a<t&&!(a+n>=e.length||a>=r.length);++a)e[a+n]=r[a];return a}function X(r){return r!==r}var Z=n(5),W=n(6),Q=n(7);e.Buffer=o,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:t(),e.kMaxLength=a(),o.poolSize=8192,o._augment=function(r){return r.__proto__=o.prototype,r},o.from=function(r,e,n){return s(null,r,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(r,e,n){return l(null,r,e,n)},o.allocUnsafe=function(r){return f(null,r)},o.allocUnsafeSlow=function(r){return f(null,r)},o.isBuffer=function(r){return!(null==r||!r._isBuffer)},o.compare=function(r,e){if(!o.isBuffer(r)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(r===e)return 0;for(var n=r.length,t=e.length,a=0,i=Math.min(n,t);a<i;++a)if(r[a]!==e[a]){n=r[a],t=e[a];break}return n<t?-1:t<n?1:0},o.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(r,e){if(!Q(r))throw new TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<r.length;++n)e+=r[n].length;var t=o.allocUnsafe(e),a=0;for(n=0;n<r.length;++n){var i=r[n];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(t,a),a+=i.length}return t},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)m(this,e,e+1);return this},o.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},o.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},o.prototype.toString=function(){var r=0|this.length;return 0===r?"":0===arguments.length?S(this,0,r):d.apply(this,arguments)},o.prototype.equals=function(r){if(!o.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===o.compare(this,r)},o.prototype.inspect=function(){var r="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(r+=" ... ")),"<Buffer "+r+">"},o.prototype.compare=function(r,e,n,t,a){if(!o.isBuffer(r))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=r?r.length:0),void 0===t&&(t=0),void 0===a&&(a=this.length),e<0||n>r.length||t<0||a>this.length)throw new RangeError("out of range index");if(t>=a&&e>=n)return 0;if(t>=a)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,t>>>=0,a>>>=0,this===r)return 0;for(var i=a-t,s=n-e,u=Math.min(i,s),l=this.slice(t,a),f=r.slice(e,n),c=0;c<u;++c)if(l[c]!==f[c]){i=l[c],s=f[c];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(r,e,n){return this.indexOf(r,e,n)!==-1},o.prototype.indexOf=function(r,e,n){return w(this,r,e,n,!0)},o.prototype.lastIndexOf=function(r,e,n){return w(this,r,e,n,!1)},o.prototype.write=function(r,e,n,t){if(void 0===e)t="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)t=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===t&&(t="utf8")):(t=n,n=void 0)}var a=this.length-e;if((void 0===n||n>a)&&(n=a),r.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");t||(t="utf8");for(var i=!1;;)switch(t){case"hex":return A(this,r,e,n);case"utf8":case"utf-8":return E(this,r,e,n);case"ascii":return j(this,r,e,n);case"latin1":case"binary":return x(this,r,e,n);case"base64":return T(this,r,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,r,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(""+t).toLowerCase(),i=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var rr=4096;o.prototype.slice=function(r,e){var n=this.length;r=~~r,e=void 0===e?n:~~e,r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<r&&(e=r);var t;if(o.TYPED_ARRAY_SUPPORT)t=this.subarray(r,e),t.__proto__=o.prototype;else{var a=e-r;t=new o(a,(void 0));for(var i=0;i<a;++i)t[i]=this[i+r]}return t},o.prototype.readUIntLE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=this[r],a=1,i=0;++i<e&&(a*=256);)t+=this[r+i]*a;return t},o.prototype.readUIntBE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=this[r+--e],a=1;e>0&&(a*=256);)t+=this[r+--e]*a;return t},o.prototype.readUInt8=function(r,e){return e||M(r,1,this.length),this[r]},o.prototype.readUInt16LE=function(r,e){return e||M(r,2,this.length),this[r]|this[r+1]<<8},o.prototype.readUInt16BE=function(r,e){return e||M(r,2,this.length),this[r]<<8|this[r+1]},o.prototype.readUInt32LE=function(r,e){return e||M(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},o.prototype.readUInt32BE=function(r,e){return e||M(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},o.prototype.readIntLE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=this[r],a=1,i=0;++i<e&&(a*=256);)t+=this[r+i]*a;return a*=128,t>=a&&(t-=Math.pow(2,8*e)),t},o.prototype.readIntBE=function(r,e,n){r=0|r,e=0|e,n||M(r,e,this.length);for(var t=e,a=1,i=this[r+--t];t>0&&(a*=256);)i+=this[r+--t]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*e)),i},o.prototype.readInt8=function(r,e){return e||M(r,1,this.length),128&this[r]?(255-this[r]+1)*-1:this[r]},o.prototype.readInt16LE=function(r,e){e||M(r,2,this.length);var n=this[r]|this[r+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(r,e){e||M(r,2,this.length);var n=this[r+1]|this[r]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(r,e){return e||M(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},o.prototype.readInt32BE=function(r,e){return e||M(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},o.prototype.readFloatLE=function(r,e){return e||M(r,4,this.length),W.read(this,r,!0,23,4)},o.prototype.readFloatBE=function(r,e){return e||M(r,4,this.length),W.read(this,r,!1,23,4)},o.prototype.readDoubleLE=function(r,e){return e||M(r,8,this.length),W.read(this,r,!0,52,8)},o.prototype.readDoubleBE=function(r,e){return e||M(r,8,this.length),W.read(this,r,!1,52,8)},o.prototype.writeUIntLE=function(r,e,n,t){if(r=+r,e=0|e,n=0|n,!t){var a=Math.pow(2,8*n)-1;N(this,r,e,n,a,0)}var i=1,o=0;for(this[e]=255&r;++o<n&&(i*=256);)this[e+o]=r/i&255;return e+n},o.prototype.writeUIntBE=function(r,e,n,t){if(r=+r,e=0|e,n=0|n,!t){var a=Math.pow(2,8*n)-1;N(this,r,e,n,a,0)}var i=n-1,o=1;for(this[e+i]=255&r;--i>=0&&(o*=256);)this[e+i]=r/o&255;return e+n},o.prototype.writeUInt8=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[e]=255&r,e+1},o.prototype.writeUInt16LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):O(this,r,e,!0),e+2},o.prototype.writeUInt16BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):O(this,r,e,!1),e+2},o.prototype.writeUInt32LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=255&r):C(this,r,e,!0),e+4},o.prototype.writeUInt32BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):C(this,r,e,!1),e+4},o.prototype.writeIntLE=function(r,e,n,t){if(r=+r,e=0|e,!t){var a=Math.pow(2,8*n-1);N(this,r,e,n,a-1,-a)}var i=0,o=1,s=0;for(this[e]=255&r;++i<n&&(o*=256);)r<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(r/o>>0)-s&255;return e+n},o.prototype.writeIntBE=function(r,e,n,t){if(r=+r,e=0|e,!t){var a=Math.pow(2,8*n-1);N(this,r,e,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[e+i]=255&r;--i>=0&&(o*=256);)r<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(r/o>>0)-s&255;return e+n},o.prototype.writeInt8=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[e]=255&r,e+1},o.prototype.writeInt16LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):O(this,r,e,!0),e+2},o.prototype.writeInt16BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):O(this,r,e,!1),e+2},o.prototype.writeInt32LE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24):C(this,r,e,!0),e+4},o.prototype.writeInt32BE=function(r,e,n){return r=+r,e=0|e,n||N(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),o.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):C(this,r,e,!1),e+4},o.prototype.writeFloatLE=function(r,e,n){return D(this,r,e,!0,n)},o.prototype.writeFloatBE=function(r,e,n){return D(this,r,e,!1,n)},o.prototype.writeDoubleLE=function(r,e,n){return q(this,r,e,!0,n)},o.prototype.writeDoubleBE=function(r,e,n){return q(this,r,e,!1,n)},o.prototype.copy=function(r,e,n,t){if(n||(n=0),t||0===t||(t=this.length),e>=r.length&&(e=r.length),e||(e=0),t>0&&t<n&&(t=n),t===n)return 0;if(0===r.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(t<0)throw new RangeError("sourceEnd out of bounds");t>this.length&&(t=this.length),r.length-e<t-n&&(t=r.length-e+n);var a,i=t-n;if(this===r&&n<e&&e<t)for(a=i-1;a>=0;--a)r[a+e]=this[a+n];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)r[a+e]=this[a+n];else Uint8Array.prototype.set.call(r,this.subarray(n,n+i),e);return i},o.prototype.fill=function(r,e,n,t){if("string"==typeof r){if("string"==typeof e?(t=e,e=0,n=this.length):"string"==typeof n&&(t=n,n=this.length),1===r.length){var a=r.charCodeAt(0);a<256&&(r=a)}if(void 0!==t&&"string"!=typeof t)throw new TypeError("encoding must be a string");if("string"==typeof t&&!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t)}else"number"==typeof r&&(r=255&r);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,r||(r=0);var i;if("number"==typeof r)for(i=e;i<n;++i)this[i]=r;else{var s=o.isBuffer(r)?r:H(new o(r,t).toString()),u=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%u]}return this};var er=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(r,e){function n(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===r[e-2]?2:"="===r[e-1]?1:0}function t(r){return 3*r.length/4-n(r)}function a(r){var e,t,a,i,o,s,u=r.length;o=n(r),s=new f(3*u/4-o),a=o>0?u-4:u;var c=0;for(e=0,t=0;e<a;e+=4,t+=3)i=l[r.charCodeAt(e)]<<18|l[r.charCodeAt(e+1)]<<12|l[r.charCodeAt(e+2)]<<6|l[r.charCodeAt(e+3)],s[c++]=i>>16&255,s[c++]=i>>8&255,s[c++]=255&i;return 2===o?(i=l[r.charCodeAt(e)]<<2|l[r.charCodeAt(e+1)]>>4,s[c++]=255&i):1===o&&(i=l[r.charCodeAt(e)]<<10|l[r.charCodeAt(e+1)]<<4|l[r.charCodeAt(e+2)]>>2,s[c++]=i>>8&255,s[c++]=255&i),s}function i(r){return u[r>>18&63]+u[r>>12&63]+u[r>>6&63]+u[63&r]}function o(r,e,n){for(var t,a=[],o=e;o<n;o+=3)t=(r[o]<<16)+(r[o+1]<<8)+r[o+2],a.push(i(t));return a.join("")}function s(r){for(var e,n=r.length,t=n%3,a="",i=[],s=16383,l=0,f=n-t;l<f;l+=s)i.push(o(r,l,l+s>f?f:l+s));return 1===t?(e=r[n-1],a+=u[e>>2],a+=u[e<<4&63],a+="=="):2===t&&(e=(r[n-2]<<8)+r[n-1],a+=u[e>>10],a+=u[e>>4&63],a+=u[e<<2&63],a+="="),i.push(a),i.join("")}e.byteLength=t,e.toByteArray=a,e.fromByteArray=s;for(var u=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=c.length;h<p;++h)u[h]=c[h],l[c.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(r,e){e.read=function(r,e,n,t,a){var i,o,s=8*a-t-1,u=(1<<s)-1,l=u>>1,f=-7,c=n?a-1:0,h=n?-1:1,p=r[e+c];for(c+=h,i=p&(1<<-f)-1,p>>=-f,f+=s;f>0;i=256*i+r[e+c],c+=h,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=t;f>0;o=256*o+r[e+c],c+=h,f-=8);if(0===i)i=1-l;else{if(i===u)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,t),i-=l}return(p?-1:1)*o*Math.pow(2,i-t)},e.write=function(r,e,n,t,a,i){var o,s,u,l=8*i-a-1,f=(1<<l)-1,c=f>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=t?0:i-1,_=t?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),e+=o+c>=1?h/u:h*Math.pow(2,1-c),e*u>=2&&(o++,u/=2),o+c>=f?(s=0,o=f):o+c>=1?(s=(e*u-1)*Math.pow(2,a),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,a),o=0));a>=8;r[n+p]=255&s,p+=_,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;r[n+p]=255&o,p+=_,o/=256,l-=8);r[n+p-_]|=128*g}},function(r,e){var n={}.toString;r.exports=Array.isArray||function(r){return"[object Array]"==n.call(r)}},function(r,e,n){function t(r,e,n){if(e=void 0===e?1:e,0===e)return r;if(e<0)throw new Error("order must be non-negative but got "+e);var a=r.shape.length,i=p.map(p.range(a),function(r){return[null]}),o=p.map(p.range(a),function(r){return[null]});return n=void 0===n?a-1:n,i[n]=1,o[n]=[null,-1],e>1?t(r.slice.apply(r,_toConsumableArray(i)).subtract(r.slice.apply(r,_toConsumableArray(o)),e-1,n)):r.slice.apply(r,_toConsumableArray(i)).subtract(r.slice.apply(r,_toConsumableArray(o)))}function a(r,e){if(void 0===e)return r.flatten().sum();var n=r.shape.length,t=r.shape[e],a=r.shape.slice();if(a.splice(e,1),0===a.length)return h.array(_.scanLeft(0,r.tolist(),function(r,e){return r+e}).slice(1));for(var i=p.map(p.range(n),function(r){return[null,null,null]}),o=h.zeros(a),s=0;s<t;s++){var u;i[e]=[s,s+1];var l=(u=r.slice.apply(r,_toConsumableArray(i))).reshape.apply(u,_toConsumableArray(a));o=o.add(l)}return o}function i(r,e){if(void 0===e)return i(r.flatten(),0);var n=r.shape.length,t=r.shape[e],a=r.shape.slice();if(a.splice(e,1),0===a.length)return h.array(_.scanLeft(0,r.tolist(),function(r,e){return r+e}).slice(1));for(var o=p.map(p.range(n),function(r){return[null,null,null]}),s=[],u=h.zeros(a),l=0;l<t;l++){var f;o[e]=[l,l+1];var c=(f=r.slice.apply(r,_toConsumableArray(o))).reshape.apply(f,_toConsumableArray(a));u=u.add(c),s.push(u.tolist())}var g=p.range(0,r.shape.length);return g[0]=e,g[e]=0,h.array(s).transpose(g)}function o(r,e){for(var n=0,t=r.shape[0]-1;n<=t;){var a=t+n>>1,i=e-r.get(a);if(i>0)n=a+1;else{if(!(i<0))return a;t=a-1}}return n}function s(r,e){var n;return(n=h.array(p.map(r.flatten().tolist(),e))).reshape.apply(n,_toConsumableArray(r.shape))}function u(r,e,n,t,a,i){var o=p.partial(c,0,r.shape[0]-1),s=p.partial(c,0,r.shape[1]-1);if(i){var u=[o(e+t),o(e+a)+1],l=[s(n+t),s(n+a)+1],f=r.slice(u,l).flatten().tolist();return h.array(f)}var g=[o(e+t),e],y=[s(n+t),s(n+a)+1],v=[e,e+1],d=[s(n+t),n],m=[e,e+1],w=[n+1,s(n+a)+1],b=[e+1,o(e+a)+1],A=[s(n+t),s(n+a)+1],E=[g,v,m,b],j=[y,d,w,A],x=_.flatMap(p.zip(E,j),function(e){var n=_slicedToArray(e,2),t=n[0],a=n[1];return r.slice(t,a).flatten().tolist()}),T=_.flatten(x);return h.array(T)}function l(r){var e=r.flatten().tolist();return e.sort(),h.array(e)}function f(r,e){var n=l(r.flatten()),t=e/100*(n.shape[0]+1)-1;if(Number.isInteger(t))return void 0===n.get(t)?null:n.get(t);var a=Math.floor(t),i=t-a,o=n.get(a),s=n.get(a+1);if(void 0===o&&void 0===s)return null;if(void 0===o)return s;if(void 0===s)return o;var u=i*(s-o)+o;return u}function c(r,e,n){return n<r?r:n>e?e:n}var h=n(3),p=n(2),_=n(9),g=function(r){return Math.sqrt(s(r,function(r){return Math.pow(r,2)}).sum())},y=function(r,e){return g(r.subtract(e))/(g(r)+g(e))};r.exports={diff:t,sum:a,cumsum:i,searchsorted:o,vectorize:s,getNeighbors:u,sort:l,percentile:f,l2Norm:g,distance:y}},function(r,e,n){function t(r,e){return Array.prototype.concat.apply([],r.map(e))}function a(r,e,n){for(var t=[],a=0;a<r.length;a+=n){var i=r.slice(a,a+e);t.push(i)}return t}function i(r,e,n){var t=[r];return o.reduce(e,function(r,e){var a=n(r,e);return t.push(a),a},r),t}var o=n(2),s=function(r){return[].concat.apply([],r)};r.exports={flatMap:t,flatten:s,sliding:a,scanLeft:i}}]);